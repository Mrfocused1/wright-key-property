<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wright Key Property | Luxury Co-Living London</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Manrope:wght@200;300;400;500&display=swap" rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --color-dark: #1a1a1a;
            --color-light: #f5f3ef;
            --color-gold: #d4af37;
            --color-gray: #888888;
        }

        body {
            background-color: var(--color-light);
            color: var(--color-dark);
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden;
        }

        /* Hide custom cursor on mobile and tablets */
        @media (min-width: 1024px) {
            body {
                cursor: none;
            }
        }

        h1, h2, h3, h4, .serif {
            font-family: 'Cormorant Garamond', serif;
        }

        /* Custom Cursor - Desktop only */
        .cursor-dot,
        .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
            display: none;
        }

        @media (min-width: 1024px) {
            .cursor-dot,
            .cursor-outline {
                display: block;
            }
        }

        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: var(--color-dark);
        }

        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(26, 26, 26, 0.5);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        body.hovering .cursor-outline {
            width: 60px;
            height: 60px;
            background-color: rgba(212, 175, 55, 0.1);
            border-color: var(--color-gold);
        }

        /* Light cursor when menu is open */
        body.menu-open .cursor-dot {
            background-color: #fff;
        }

        body.menu-open .cursor-outline {
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Smooth Scroll Container */
        .smooth-wrapper {
            width: 100%;
        }

        /* Utility: Image Reveal Mask */
        .reveal-img-container {
            overflow: hidden;
            position: relative;
        }

        .reveal-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scale(1.2); /* For parallax start */
        }

        .reveal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-light);
            z-index: 2;
        }

        /* Typography Utilities */
        .text-reveal-wrapper {
            overflow: hidden;
            display: inline-block;
            vertical-align: bottom;
        }

        .text-reveal-inner {
            display: inline-block;
            transform: translateY(110%);
            animation: fallback-reveal 0.5s ease-out 4s forwards;
        }

        @keyframes fallback-reveal {
            to { transform: translateY(0); }
        }

        /* Menu Overlay */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            background: var(--color-dark);
            color: var(--color-light);
            z-index: 90;
            transform: translateY(-100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Loader */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            background: #111;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
        }

        .loader-line {
            width: 0%;
            height: 1px;
            background: #fff;
            margin-top: 20px;
        }

        /* Vertical Text (Japanese inspired) */
        .vertical-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
        }

        /* Hero Video Background */
        .hero-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        .hero-video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 1;
        }
    </style>
</head>
<body class="antialiased selection:bg-[#d4af37] selection:text-white">

    <!-- Custom Cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <!-- Preloader -->
    <div class="loader">
        <!-- Mobile Video Intro (hidden by default) -->
        <video id="intro-video" class="hidden absolute inset-0 w-full h-full object-cover" muted playsinline webkit-playsinline></video>
        <div class="text-center" id="loader-content">
            <h2 class="text-3xl font-light serif italic tracking-widest opacity-0" id="loader-text">WRIGHT KEY PROPERTY</h2>
            <div class="loader-line"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="site-header" class="fixed top-0 left-0 w-full px-8 py-6 flex justify-between items-center z-50 text-white">
        <div id="header-logo" class="logo font-light tracking-[0.2em] text-sm uppercase hoverable">
            <span id="header-logo-text">Wright Key Property</span>
            <img id="header-logo-img" src="" alt="Logo" class="h-8 hidden">
        </div>
        <div class="menu-btn cursor-pointer flex gap-2 items-center group hoverable">
            <span class="text-xs tracking-widest uppercase group-hover:opacity-70 transition-opacity">Menu</span>
            <div class="w-8 h-[1px] bg-current group-hover:w-12 transition-all duration-300"></div>
        </div>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay">
        <div class="flex flex-col gap-8 text-center" id="menu-items-container">
            <a href="/" id="menu-item-1" class="menu-link text-5xl serif italic hover:text-[#d4af37] transition-colors hoverable">Home</a>
            <a href="/search" id="menu-item-2" class="menu-link text-5xl serif italic hover:text-[#d4af37] transition-colors hoverable">Browse</a>
            <a href="/coliving" id="menu-item-3" class="menu-link text-5xl serif italic hover:text-[#d4af37] transition-colors hoverable">Co-Living</a>
            <a href="/investor" id="menu-item-4" class="menu-link text-5xl serif italic hover:text-[#d4af37] transition-colors hoverable">For Investors</a>
            <a href="#contact" id="menu-item-5" class="menu-link text-5xl serif italic hover:text-[#d4af37] transition-colors hoverable">Contact</a>
            <div class="close-menu mt-12 cursor-pointer text-xs uppercase tracking-widest hoverable border rounded-full px-6 py-2 border-white/20 hover:bg-white hover:text-black transition-all">Close</div>
        </div>
    </div>

    <main class="smooth-wrapper">

        <!-- Hero Section with Video Background -->
        <section id="section-hero" class="relative w-full h-screen flex flex-col justify-center items-center overflow-hidden px-6">
            <!-- Background Video with Parallax -->
            <div class="absolute inset-0 z-0">
                <video autoplay muted loop playsinline webkit-playsinline preload="auto" class="hero-video" id="hero-video">
                    <source src="assets/hero-video.mp4" type="video/mp4">
                </video>
                <div class="hero-video-overlay"></div>
            </div>

            <!-- Content -->
            <div class="relative z-10 text-center text-white">
                <h1 class="text-6xl md:text-8xl lg:text-9xl font-light serif italic leading-none mb-6">
                    <div class="text-reveal-wrapper"><span class="text-reveal-inner" id="hero-headline1">Unlocking</span></div><br>
                    <div class="text-reveal-wrapper"><span class="text-reveal-inner" id="hero-headline2">Luxury</span></div>
                    <div class="text-reveal-wrapper"><span class="text-reveal-inner" id="hero-headline3">Living</span></div>
                </h1>
                <p class="max-w-md mx-auto text-sm font-light leading-relaxed text-white mt-8 overflow-hidden">
                    <span class="text-reveal-inner delay-300" id="hero-subheadline">
                        Transforming properties into exceptional co-living spaces for professionals, NHS staff, and students.
                    </span>
                </p>
                <!-- Hero CTAs -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-12">
                    <a href="/search" id="hero-cta1" class="bg-white text-black px-8 py-4 rounded-full text-xs uppercase tracking-widest hover:bg-[#d4af37] hover:text-white transition-all duration-300 hoverable">
                        Browse Properties
                    </a>
                    <a href="/coliving" id="hero-cta2" class="border border-white text-white px-8 py-4 rounded-full text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-all duration-300 hoverable">
                        Room Suites
                    </a>
                </div>
            </div>

            <!-- Scroll Indicator -->
            <div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white">
                <span class="text-[10px] uppercase tracking-widest">Scroll</span>
                <div class="w-[1px] h-12 bg-white/50 origin-top animate-pulse"></div>
            </div>
        </section>

        <!-- About / Our Story Section -->
        <section id="section-about" class="relative py-12 md:py-32 px-6 md:px-20 bg-[#f5f3ef]">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-16">
                <!-- Left Vertical Text -->
                <div class="hidden lg:block lg:col-span-1 relative">
                    <div class="vertical-text absolute top-0 text-xs tracking-widest text-gray-400 uppercase" id="about-label">
                        Our Story — 01
                    </div>
                </div>

                <!-- Main Content -->
                <div class="lg:col-span-6">
                    <h2 class="text-4xl md:text-6xl serif font-light leading-[1.1] mb-12 split-text" id="about-headline">
                        We breathe new life into dated properties, curating spaces that inspire connection.
                    </h2>
                    <div class="space-y-8 text-gray-600 font-light leading-relaxed max-w-md fade-in-up">
                        <p id="about-paragraph1">
                            At Wright Key Property, we don't just renovate; we reimagine. We specialize in acquiring HMO conversions and refurbishing them to a boutique luxury standard.
                        </p>
                        <p id="about-paragraph2">
                            Our service area is London, where the demand for high-quality, flexible living is ever-growing. We cater specifically to those who keep the city moving: working professionals and NHS staff.
                        </p>
                        <a href="#contact" id="about-link" class="inline-block mt-4 border-b border-black pb-1 text-black text-sm uppercase tracking-widest hover:text-[#d4af37] hover:border-[#d4af37] transition-all hoverable">
                            Our Story
                        </a>
                    </div>
                </div>

                <!-- Image Grid -->
                <div class="lg:col-span-5 relative mt-12 lg:mt-0">
                    <div class="reveal-img-container aspect-[3/4] w-full md:w-3/4 ml-auto">
                        <img src="assets/about-modern-interior.jpg"
                             class="reveal-img" alt="Modern Interior Detail">
                        <div class="reveal-overlay"></div>
                    </div>
                    <div class="absolute -bottom-10 -left-10 w-1/2 aspect-square reveal-img-container z-10 shadow-xl hidden md:block" data-speed="0.8">
                         <img src="assets/about-detail.jpg"
                             class="reveal-img" alt="Texture Detail">
                         <div class="reveal-overlay"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Micro-Animation Stats Strip -->
        <section id="section-stats" class="border-y border-gray-200 py-12 overflow-hidden bg-white">
            <div class="marquee-wrapper flex gap-20 whitespace-nowrap">
                <!-- Content injected via JS for infinite loop, simplified here -->
                <div class="flex gap-20 items-center opacity-50 text-sm uppercase tracking-widest">
                    <span>• London Service Area</span>
                    <span>• Luxury HMO Refurbishment</span>
                    <span>• Professional Tenants</span>
                    <span>• NHS Housing Partners</span>
                    <span>• Student Accommodation</span>
                    <span>• Guaranteed Rent Options</span>
                    <span>• London Service Area</span>
                    <span>• Luxury HMO Refurbishment</span>
                    <span>• Professional Tenants</span>
                    <span>• NHS Housing Partners</span>
                </div>
            </div>
        </section>

        <!-- For Investors Section (Dark Mode) -->
        <section id="section-investors" class="relative py-32 bg-[#1a1a1a] text-[#f5f3ef]">
            <div class="absolute top-0 right-10 h-full w-[1px] bg-white/10 hidden md:block"></div>

            <div class="container mx-auto px-6 md:px-20">
                <div class="mb-20">
                    <span class="text-xs text-[#d4af37] uppercase tracking-widest block mb-4" id="investors-label">Investment Opportunities</span>
                    <h2 class="text-5xl md:text-7xl serif italic font-light split-text" id="investors-headline">Hands-off Investment</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <!-- Card 1 -->
                    <div class="group border-t border-white/20 pt-8 hover:border-[#d4af37] transition-colors duration-500 hoverable">
                        <span class="text-4xl font-light text-white/20 group-hover:text-[#d4af37] transition-colors mb-6 block">01</span>
                        <h3 class="text-2xl serif mb-4" id="investor-card1-title">Sourcing Deals</h3>
                        <p class="text-gray-400 font-light text-sm leading-relaxed" id="investor-card1-desc">
                            We leverage our extensive network to find off-market properties with high potential, bypassing the competitive open market.
                        </p>
                    </div>

                    <!-- Card 2 -->
                    <div class="group border-t border-white/20 pt-8 hover:border-[#d4af37] transition-colors duration-500 hoverable">
                        <span class="text-4xl font-light text-white/20 group-hover:text-[#d4af37] transition-colors mb-6 block">02</span>
                        <h3 class="text-2xl serif mb-4" id="investor-card2-title">Power Team</h3>
                        <p class="text-gray-400 font-light text-sm leading-relaxed" id="investor-card2-desc">
                            From architects to contractors, we have a trusted team in place to execute refurbishments to a luxury standard on time and budget.
                        </p>
                    </div>

                    <!-- Card 3 -->
                    <div class="group border-t border-white/20 pt-8 hover:border-[#d4af37] transition-colors duration-500 hoverable">
                        <span class="text-4xl font-light text-white/20 group-hover:text-[#d4af37] transition-colors mb-6 block">03</span>
                        <h3 class="text-2xl serif mb-4" id="investor-card3-title">Passive Income</h3>
                        <p class="text-gray-400 font-light text-sm leading-relaxed" id="investor-card3-desc">
                            Enjoy the returns of property investment without the headache. We manage the process from acquisition to tenanting.
                        </p>
                    </div>
                </div>

                <!-- Large Parallax Image -->
                <div class="mt-24 w-full h-[60vh] reveal-img-container transition-all duration-700">
                    <img src="assets/investment-property.jpg"
                         alt="Investment Property"
                         class="reveal-img object-center">
                    <div class="reveal-overlay bg-[#1a1a1a]"></div>
                </div>
            </div>
        </section>

        <!-- Sourcing / We Buy Section -->
        <section id="section-sourcing" class="py-32 px-6 md:px-20 bg-[#f5f3ef]">
            <div class="flex flex-col md:flex-row items-center gap-16">
                <div class="w-full md:w-1/2">
                    <h2 class="text-5xl md:text-7xl serif font-light mb-8 leading-none">
                        <span id="sourcing-headline1">We Buy Properties</span> <br>
                        <span class="italic text-gray-400" id="sourcing-headline2">In Any Condition.</span>
                    </h2>
                    <p class="text-gray-600 font-light text-lg mb-8 max-w-md" id="sourcing-description">
                        Have a dated property? An HMO conversion that needs work? We offer a swift, hassle-free selling process for property owners in London.
                    </p>
                    <button class="bg-[#1a1a1a] text-white px-8 py-4 rounded-full text-xs uppercase tracking-widest hover:bg-[#d4af37] transition-colors hoverable" id="sourcing-button">
                        Get an Offer
                    </button>
                </div>

                <div class="w-full md:w-1/2 relative">
                    <!-- Before/After Concept stylized -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="reveal-img-container aspect-[3/4] translate-y-12">
                             <img src="assets/property-before.jpg"
                                 class="reveal-img" alt="Modern Room">
                                 <div class="reveal-overlay"></div>
                        </div>
                        <div class="reveal-img-container aspect-[3/4]">
                             <img src="assets/property-after.jpg"
                                 class="reveal-img" alt="Refurbishment">
                                 <div class="reveal-overlay"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="section-contact" class="relative py-20 bg-[#f5f3ef] border-t border-gray-300">
            <div class="container mx-auto px-6 text-center">
                <p class="text-xs uppercase tracking-[0.3em] mb-6" id="contact-label">Start the Conversation</p>
                <h2 class="text-5xl md:text-7xl serif italic font-light mb-8 hover:text-[#d4af37] transition-colors duration-500 cursor-pointer hoverable" id="contact-headline">
                    Let's Talk.
                </h2>

                <form class="max-w-md mx-auto text-left space-y-8" id="contact-form">
                    <div class="relative border-b border-black/20 focus-within:border-black transition-colors">
                        <input type="text" name="name" id="form-name-input" placeholder="Your Name" class="w-full bg-transparent py-4 outline-none placeholder:text-gray-400 placeholder:italic placeholder:serif hoverable" required>
                    </div>
                    <div class="relative border-b border-black/20 focus-within:border-black transition-colors">
                        <input type="email" name="email" id="form-email-input" placeholder="Email Address" class="w-full bg-transparent py-4 outline-none placeholder:text-gray-400 placeholder:italic placeholder:serif hoverable" required>
                    </div>
                    <div class="relative border-b border-black/20 focus-within:border-black transition-colors">
                        <select name="enquiry_type" id="form-enquiry-select" class="w-full bg-transparent py-4 outline-none text-gray-400 italic serif hoverable cursor-pointer" required>
                            <option value="" disabled selected>Enquiry Type</option>
                            <option value="lettings" id="enquiry-option1" class="text-black">Enquiry for Lettings</option>
                            <option value="investing" id="enquiry-option2" class="text-black">Enquiry for Investing</option>
                        </select>
                    </div>
                    <div class="relative border-b border-black/20 focus-within:border-black transition-colors">
                        <textarea name="message" id="form-message-input" placeholder="Your Message" rows="3" class="w-full bg-transparent py-4 outline-none placeholder:text-gray-400 placeholder:italic placeholder:serif hoverable resize-none" required></textarea>
                    </div>
                    <button type="submit" id="form-submit-btn" class="mt-8 text-xs uppercase tracking-widest hover:text-[#d4af37] transition-colors flex items-center gap-2 group hoverable">
                        <span id="form-submit-text">Send Message</span>
                        <span class="group-hover:translate-x-2 transition-transform">→</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- Footer -->
        <footer id="section-footer" class="bg-[#1a1a1a] text-white/40 py-12 px-6">
            <div class="flex flex-col md:flex-row justify-between items-center md:items-end text-center md:text-left">
                <div>
                    <h3 class="text-white text-2xl serif italic mb-2" id="footer-company">Wright Key Property</h3>
                    <p class="text-xs" id="footer-copyright">© 2024 All Rights Reserved.</p>
                    <div class="mt-3 space-y-1">
                        <a href="mailto:jbwrightkeyproperty@gmail.com" class="block text-xs hover:text-white transition-colors" id="footer-email">jbwrightkeyproperty@gmail.com</a>
                        <a href="tel:07852149077" class="block text-xs hover:text-white transition-colors" id="footer-phone">Tel: 07852149077</a>
                    </div>
                </div>
                <div class="flex justify-center md:justify-start gap-6 mt-6 md:mt-0 text-xs uppercase tracking-widest">
                    <a href="https://instagram.com/jb_wrightkeyproperty" target="_blank" class="hover:text-white transition-colors hoverable" id="footer-instagram">Instagram</a>
                </div>
            </div>
        </footer>

    </main>

    <!-- Scripts -->
    <script>
        // Register GSAP Plugins
        gsap.registerPlugin(ScrollTrigger);

        // Video autoplay handling - comprehensive mobile solution
        const heroVideo = document.getElementById('hero-video');
        let videoIsPlaying = false;

        function playVideo() {
            if (!heroVideo || videoIsPlaying) return;

            // Ensure all autoplay requirements are met
            heroVideo.muted = true;
            heroVideo.playsInline = true;
            heroVideo.webkitPlaysInline = true;
            heroVideo.setAttribute('playsinline', '');
            heroVideo.setAttribute('webkit-playsinline', '');

            const playPromise = heroVideo.play();
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        videoIsPlaying = true;
                    })
                    .catch(function(error) {
                        console.log("Video autoplay attempt:", error.message);
                        videoIsPlaying = false;
                    });
            }
        }

        if (heroVideo) {
            // Force load the video
            heroVideo.load();

            // Strategy 1: Multiple video ready events
            heroVideo.addEventListener('loadedmetadata', playVideo);
            heroVideo.addEventListener('loadeddata', playVideo);
            heroVideo.addEventListener('canplay', playVideo);
            heroVideo.addEventListener('canplaythrough', playVideo);

            // Strategy 2: Check if already ready
            if (heroVideo.readyState >= 2) {
                playVideo();
            }

            // Strategy 3: Delayed retry attempts
            setTimeout(playVideo, 100);
            setTimeout(playVideo, 300);
            setTimeout(playVideo, 600);
            setTimeout(playVideo, 1000);
            setTimeout(playVideo, 2000);

            // Strategy 4: Window load event
            window.addEventListener('load', playVideo);

            // Strategy 5: Intersection Observer - play when visible
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            playVideo();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(heroVideo);
            }

            // Strategy 6: User interaction fallbacks
            ['touchstart', 'touchend', 'click', 'scroll', 'mousemove'].forEach(event => {
                document.addEventListener(event, playVideo, { once: true, passive: true });
            });
        }

        // --- Custom Cursor Logic ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        const body = document.body;

        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;

            // Dot follows instantly
            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;

            // Outline follows with slight delay (animation in CSS would be choppy for this, best to use GSAP for smoothness or simple CSS transition)
            // Using GSAP for smooth lag
            gsap.to(cursorOutline, {
                x: posX,
                y: posY,
                duration: 0.15,
                ease: "power2.out"
            });
        });

        // Hover Effect
        const hoverables = document.querySelectorAll('.hoverable');
        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => body.classList.remove('hovering'));
        });


        // --- Mobile Intro Video & Preloader Animation ---
        const isMobile = window.innerWidth <= 768;
        const introVideo = document.getElementById('intro-video');
        const loaderContent = document.getElementById('loader-content');

        function runDefaultLoader() {
            const tlLoader = gsap.timeline();
            tlLoader.to('#loader-text', { opacity: 1, duration: 1, ease: "power2.out" })
                .to('.loader-line', { width: '100%', duration: 1.5, ease: "power2.inOut" })
                .to('#loader-text, .loader-line', { opacity: 0, duration: 0.5 })
                .to('.loader', {
                    height: 0,
                    duration: 1,
                    ease: "expo.inOut",
                    onComplete: initSiteAnimations
                });
        }

        function playIntroVideo(videoUrl) {
            // Hide default loader content, show video
            loaderContent.style.display = 'none';
            introVideo.classList.remove('hidden');
            introVideo.src = videoUrl;
            introVideo.muted = true;
            introVideo.playsInline = true;

            // Play video and close loader when done
            introVideo.play().then(() => {
                introVideo.addEventListener('ended', () => {
                    gsap.to('.loader', {
                        opacity: 0,
                        duration: 0.5,
                        onComplete: () => {
                            document.querySelector('.loader').style.height = '0';
                            initSiteAnimations();
                        }
                    });
                });

                // Fallback: if video is longer than 8 seconds, close anyway
                setTimeout(() => {
                    if (document.querySelector('.loader').style.height !== '0') {
                        gsap.to('.loader', {
                            opacity: 0,
                            duration: 0.5,
                            onComplete: () => {
                                document.querySelector('.loader').style.height = '0';
                                initSiteAnimations();
                            }
                        });
                    }
                }, 8000);
            }).catch(() => {
                // If video fails to play, run default loader
                loaderContent.style.display = 'block';
                introVideo.classList.add('hidden');
                runDefaultLoader();
            });
        }

        // Check for mobile intro video from Vercel Blob
        if (isMobile && introVideo) {
            // Fetch intro video URL from API
            fetch('/api/intro-video')
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.hasVideo && data.url) {
                        playIntroVideo(data.url);
                    } else {
                        runDefaultLoader();
                    }
                })
                .catch(() => {
                    // If API fails, run default loader
                    runDefaultLoader();
                });
        } else {
            // Run default text loader
            runDefaultLoader();
        }


        async function initSiteAnimations() {
            // Load dynamic content with timeout (don't block animations forever)
            try {
                await Promise.race([
                    loadDynamicContent(),
                    new Promise((_, reject) => setTimeout(() => reject('timeout'), 3000))
                ]);
            } catch (e) {
                // Content load timed out or failed, continue with animations
            }

            // Try to play video again after loader finishes
            playVideo();

            // Hero Text Reveal - ALWAYS run this animation
            gsap.to('.text-reveal-inner', {
                y: 0,
                duration: 1.5,
                stagger: 0.2,
                ease: "power4.out",
                delay: 0.2
            });

            // Reveal Overlay Images (Global)
            const revealContainers = document.querySelectorAll('.reveal-img-container');

            revealContainers.forEach(container => {
                let overlay = container.querySelector('.reveal-overlay');
                let img = container.querySelector('.reveal-img');

                let tl = gsap.timeline({
                    scrollTrigger: {
                        trigger: container,
                        start: "top 80%",
                    }
                });

                tl.to(overlay, {
                    height: "0%",
                    duration: 1.2,
                    ease: "power4.inOut"
                })
                .to(img, {
                    scale: 1,
                    duration: 1.4,
                    ease: "power2.out",
                    delay: -1.2
                });
            });

            // Parallax Effects on Images
            document.querySelectorAll('.reveal-img').forEach(img => {
                gsap.to(img, {
                    yPercent: 15, // Move image down slightly as we scroll
                    ease: "none",
                    scrollTrigger: {
                        trigger: img.parentElement,
                        start: "top bottom",
                        end: "bottom top",
                        scrub: true
                    }
                });
            });

            // Split Text / Header Reveals (Simulated split text)
            const headers = document.querySelectorAll('h2');
            headers.forEach(header => {
                gsap.from(header, {
                    y: 50,
                    opacity: 0,
                    duration: 1,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: header,
                        start: "top 85%"
                    }
                });
            });

            // Fade in Up Elements
            const fadeUps = document.querySelectorAll('.fade-in-up');
            fadeUps.forEach(el => {
                gsap.from(el, {
                    y: 30,
                    opacity: 0,
                    duration: 1,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: el,
                        start: "top 90%"
                    }
                });
            });

            // Marquee Animation - faster speed with longer pause before restart
            gsap.to(".marquee-wrapper", {
                xPercent: -50,
                repeat: -1,
                duration: 6,
                ease: "linear",
                repeatDelay: 3
            });
        }

        // --- Navigation Logic ---
        const menuBtn = document.querySelector('.menu-btn');
        const closeMenu = document.querySelector('.close-menu');
        const menuOverlay = document.querySelector('.menu-overlay');
        const menuLinks = document.querySelectorAll('.menu-link');

        const tlMenu = gsap.timeline({ paused: true });

        tlMenu.to(menuOverlay, {
            y: "0%",
            duration: 0.8,
            ease: "expo.inOut"
        })
        .from(menuLinks, {
            y: 50,
            opacity: 0,
            duration: 0.5,
            stagger: 0.1,
            ease: "power2.out"
        }, "-=0.4");

        menuBtn.addEventListener('click', () => {
            tlMenu.play();
            body.style.overflow = "hidden"; // Prevent scrolling
            body.classList.add('menu-open');
        });

        closeMenu.addEventListener('click', () => {
            tlMenu.reverse();
            body.style.overflow = "";
            body.classList.remove('menu-open');
        });

        menuLinks.forEach(link => {
            link.addEventListener('click', () => {
                tlMenu.reverse();
                body.style.overflow = "";
                body.classList.remove('menu-open');
            });
        });

        // --- Contact Form Handler ---
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Get form data
            const formData = new FormData(contactForm);
            const data = Object.fromEntries(formData);

            // Here you would typically send this to a backend
            console.log('Form submitted:', data);

            // Show success message (you can enhance this with a proper modal)
            alert('Thank you for your message! We will get back to you soon.');

            // Reset form
            contactForm.reset();
        });

        // Initialize Lucide icons
        lucide.createIcons();

        // --- Load Dynamic Content from Admin ---
        async function loadDynamicContent() {
            try {
                const response = await fetch('/api/content?t=' + Date.now(), {
                    cache: 'no-store'
                });
                const data = await response.json();

                if (!data.success || !data.content) return;

                const content = data.content;

                // Apply visibility settings
                if (content.visibility) {
                    const sections = {
                        header: document.getElementById('site-header'),
                        hero: document.getElementById('section-hero'),
                        about: document.getElementById('section-about'),
                        stats: document.getElementById('section-stats'),
                        investors: document.getElementById('section-investors'),
                        sourcing: document.getElementById('section-sourcing'),
                        contact: document.getElementById('section-contact'),
                        footer: document.getElementById('section-footer')
                    };

                    Object.keys(sections).forEach(key => {
                        if (sections[key] && content.visibility[key] === false) {
                            sections[key].style.display = 'none';
                        }
                    });
                }

                // Header settings
                if (content.header) {
                    const logoText = document.getElementById('header-logo-text');
                    const logoImg = document.getElementById('header-logo-img');

                    if (content.header.logo_text && logoText) {
                        logoText.textContent = content.header.logo_text;
                    }

                    if (content.header.logo_url && logoImg) {
                        logoImg.src = content.header.logo_url;
                        logoImg.classList.remove('hidden');
                        if (logoText) logoText.classList.add('hidden');
                    }

                    // Menu items
                    if (content.header.menu_items) {
                        content.header.menu_items.forEach((item, i) => {
                            const menuLink = document.getElementById(`menu-item-${i + 1}`);
                            if (menuLink) {
                                if (item.visible === false) {
                                    menuLink.style.display = 'none';
                                } else {
                                    menuLink.textContent = item.text || menuLink.textContent;
                                    menuLink.href = item.link || menuLink.href;
                                }
                            }
                        });
                    }
                }

                // Hero Section
                if (content.hero) {
                    if (content.hero.headline1) document.getElementById('hero-headline1').textContent = content.hero.headline1;
                    if (content.hero.headline2) document.getElementById('hero-headline2').textContent = content.hero.headline2;
                    if (content.hero.headline3) document.getElementById('hero-headline3').textContent = content.hero.headline3;
                    if (content.hero.subheadline) document.getElementById('hero-subheadline').textContent = content.hero.subheadline;

                    const cta1 = document.getElementById('hero-cta1');
                    const cta2 = document.getElementById('hero-cta2');
                    if (content.hero.cta1_text && cta1) cta1.textContent = content.hero.cta1_text;
                    if (content.hero.cta1_link && cta1) cta1.href = content.hero.cta1_link;
                    if (content.hero.cta2_text && cta2) cta2.textContent = content.hero.cta2_text;
                    if (content.hero.cta2_link && cta2) cta2.href = content.hero.cta2_link;

                    if (content.hero.video_url) {
                        const heroVideo = document.getElementById('hero-video');
                        if (heroVideo) {
                            heroVideo.innerHTML = '';
                            const source = document.createElement('source');
                            source.src = content.hero.video_url;
                            source.type = 'video/mp4';
                            heroVideo.appendChild(source);
                            heroVideo.load();
                        }
                    }
                }

                // About Section
                if (content.about) {
                    const aboutLabel = document.getElementById('about-label');
                    const aboutHeadline = document.getElementById('about-headline');
                    const aboutP1 = document.getElementById('about-paragraph1');
                    const aboutP2 = document.getElementById('about-paragraph2');
                    const aboutLink = document.getElementById('about-link');

                    if (content.about.label && aboutLabel) aboutLabel.textContent = content.about.label;
                    if (content.about.headline && aboutHeadline) aboutHeadline.textContent = content.about.headline;
                    if (content.about.paragraph1 && aboutP1) aboutP1.textContent = content.about.paragraph1;
                    if (content.about.paragraph2 && aboutP2) aboutP2.textContent = content.about.paragraph2;
                    if (content.about.link_text && aboutLink) aboutLink.textContent = content.about.link_text;
                }

                // Investors Section
                if (content.investors) {
                    const investorsLabel = document.getElementById('investors-label');
                    const investorsHeadline = document.getElementById('investors-headline');

                    if (content.investors.label && investorsLabel) investorsLabel.textContent = content.investors.label;
                    if (content.investors.headline && investorsHeadline) investorsHeadline.textContent = content.investors.headline;

                    if (content.investors.card1_title) document.getElementById('investor-card1-title').textContent = content.investors.card1_title;
                    if (content.investors.card1_desc) document.getElementById('investor-card1-desc').textContent = content.investors.card1_desc;
                    if (content.investors.card2_title) document.getElementById('investor-card2-title').textContent = content.investors.card2_title;
                    if (content.investors.card2_desc) document.getElementById('investor-card2-desc').textContent = content.investors.card2_desc;
                    if (content.investors.card3_title) document.getElementById('investor-card3-title').textContent = content.investors.card3_title;
                    if (content.investors.card3_desc) document.getElementById('investor-card3-desc').textContent = content.investors.card3_desc;
                }

                // Sourcing Section
                if (content.sourcing) {
                    if (content.sourcing.headline1) document.getElementById('sourcing-headline1').textContent = content.sourcing.headline1;
                    if (content.sourcing.headline2) document.getElementById('sourcing-headline2').textContent = content.sourcing.headline2;
                    if (content.sourcing.description) document.getElementById('sourcing-description').textContent = content.sourcing.description;
                    if (content.sourcing.button_text) document.getElementById('sourcing-button').textContent = content.sourcing.button_text;
                }

                // Contact Section
                if (content.contact) {
                    if (content.contact.label) document.getElementById('contact-label').textContent = content.contact.label;
                    if (content.contact.headline) document.getElementById('contact-headline').textContent = content.contact.headline;

                    const emailLink = document.getElementById('contact-email-link');
                    const phoneLink = document.getElementById('contact-phone-link');

                    if (content.contact.email && emailLink) {
                        emailLink.textContent = content.contact.email;
                        emailLink.href = 'mailto:' + content.contact.email;
                    }
                    if (content.contact.phone && phoneLink) {
                        phoneLink.textContent = content.contact.phone;
                        phoneLink.href = 'tel:' + content.contact.phone;
                    }
                    if (content.contact.address) {
                        document.getElementById('contact-address').innerHTML = content.contact.address.replace(/\n/g, '<br>');
                    }

                    // Form field placeholders
                    const nameInput = document.getElementById('form-name-input');
                    const emailInput = document.getElementById('form-email-input');
                    const messageInput = document.getElementById('form-message-input');
                    const submitText = document.getElementById('form-submit-text');
                    const option1 = document.getElementById('enquiry-option1');
                    const option2 = document.getElementById('enquiry-option2');

                    if (content.contact.form_name_placeholder && nameInput) {
                        nameInput.placeholder = content.contact.form_name_placeholder;
                    }
                    if (content.contact.form_email_placeholder && emailInput) {
                        emailInput.placeholder = content.contact.form_email_placeholder;
                    }
                    if (content.contact.form_message_placeholder && messageInput) {
                        messageInput.placeholder = content.contact.form_message_placeholder;
                    }
                    if (content.contact.form_submit_text && submitText) {
                        submitText.textContent = content.contact.form_submit_text;
                    }
                    if (content.contact.enquiry_option1 && option1) {
                        option1.textContent = content.contact.enquiry_option1;
                    }
                    if (content.contact.enquiry_option2 && option2) {
                        option2.textContent = content.contact.enquiry_option2;
                    }
                }

                // Footer
                if (content.footer) {
                    if (content.footer.company) document.getElementById('footer-company').textContent = content.footer.company;
                    if (content.footer.copyright) document.getElementById('footer-copyright').textContent = content.footer.copyright;

                    const footerEmail = document.getElementById('footer-email');
                    const footerPhone = document.getElementById('footer-phone');
                    const footerInstagram = document.getElementById('footer-instagram');

                    if (content.contact && content.contact.email && footerEmail) {
                        footerEmail.textContent = content.contact.email;
                        footerEmail.href = 'mailto:' + content.contact.email;
                    }
                    if (content.contact && content.contact.phone && footerPhone) {
                        footerPhone.textContent = 'Tel: ' + content.contact.phone;
                        footerPhone.href = 'tel:' + content.contact.phone;
                    }
                    if (content.footer.instagram && footerInstagram) {
                        footerInstagram.href = content.footer.instagram;
                    }
                }

            } catch (error) {
                // No custom content loaded, using defaults
            }
        }

        // Load dynamic content on page load
        loadDynamicContent();
    </script>
</body>
</html>
