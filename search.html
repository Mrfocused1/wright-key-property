<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wright Key Property | Browse Collection</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Manrope:wght@200;300;400;500&display=swap" rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --color-dark: #1a1a1a;
            --color-light: #f5f3ef;
            --color-gold: #E5A137;
        }

        body {
            background-color: var(--color-light);
            color: var(--color-dark);
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden;
        }

        /* Hide custom cursor on mobile and tablets */
        @media (min-width: 1024px) {
            body {
                cursor: none;
            }
        }

        h1, h2, h3, h4, .serif {
            font-family: 'Cormorant Garamond', serif;
        }

        /* Custom Cursor - Desktop only */
        .cursor-dot,
        .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
            display: none;
        }

        @media (min-width: 1024px) {
            .cursor-dot,
            .cursor-outline {
                display: block;
            }
        }

        .cursor-dot {
            width: 6px;
            height: 6px;
            background-color: var(--color-dark);
        }

        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(0, 0, 0, 0.3);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        body.hovering .cursor-outline {
            width: 60px;
            height: 60px;
            background-color: rgba(212, 175, 55, 0.1);
            border-color: var(--color-gold);
        }

        /* Light cursor when menu is open */
        body.menu-open .cursor-dot {
            background-color: #fff;
        }

        body.menu-open .cursor-outline {
            border-color: rgba(255, 255, 255, 0.5);
        }

        .smooth-wrapper { width: 100%; }

        /* Reveal Image Overlay */
        .reveal-img-container {
            overflow: hidden;
            position: relative;
        }

        .reveal-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scale(1.2);
        }

        .reveal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-light);
            z-index: 2;
        }

        /* Menu Overlay */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            background: var(--color-dark);
            color: var(--color-light);
            z-index: 90;
            transform: translateY(-100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Loader */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            background: #111;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            pointer-events: none;
        }

        .loader.active {
            pointer-events: all;
        }

        .loader-line {
            width: 0%;
            height: 1px;
            background: #fff;
            margin-top: 20px;
        }

        /* Form Elements */
        .custom-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-appearance: none;
            appearance: none;
        }
    </style>
</head>
<body class="antialiased selection:bg-[#E5A137] selection:text-white">

    <!-- Custom Cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <!-- Preloader -->
    <div class="loader active">
        <div class="text-center">
            <h2 class="text-3xl font-light serif italic tracking-widest opacity-0" id="loader-text">BROWSE</h2>
            <div class="loader-line"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full px-8 py-6 flex justify-between items-center z-50 text-white transition-all duration-300" id="main-nav">
        <a href="/" class="logo font-medium tracking-[0.2em] text-sm uppercase hoverable">Wright Key Property</a>
        <div class="menu-btn cursor-pointer flex gap-2 items-center group hoverable">
            <span class="text-xs tracking-widest uppercase group-hover:opacity-70 transition-opacity">Menu</span>
            <div class="w-8 h-[1px] bg-current group-hover:w-12 transition-all duration-300"></div>
        </div>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay">
        <div class="flex flex-col gap-8 text-center">
            <a href="/" class="menu-link text-5xl serif italic hover:text-[#E5A137] transition-colors hoverable">Home</a>
            <a href="/coliving" class="menu-link text-5xl serif italic hover:text-[#E5A137] transition-colors hoverable">Co-Living</a>
            <a href="/search" class="menu-link text-5xl serif italic hover:text-[#E5A137] transition-colors hoverable text-[#E5A137]">Browse</a>
            <a href="/investor" class="menu-link text-5xl serif italic hover:text-[#E5A137] transition-colors hoverable">For Investors</a>
            <a href="/#contact" class="menu-link text-5xl serif italic hover:text-[#E5A137] transition-colors hoverable">Contact</a>
            <div class="close-menu mt-12 cursor-pointer text-xs uppercase tracking-widest hoverable border rounded-full px-6 py-2 border-white/20 hover:bg-white hover:text-black transition-all">Close</div>
        </div>
    </div>

    <main class="smooth-wrapper">

        <!-- Hero Section with Background Image -->
        <section class="relative min-h-[70vh] md:min-h-screen flex items-center justify-center overflow-hidden">
            <!-- Background Image -->
            <div class="absolute inset-0 z-0">
                <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=2670&auto=format&fit=crop"
                     alt="Luxury London Property"
                     class="w-full h-full object-cover"
                     id="hero-bg">
            </div>

            <!-- Dark Overlay -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/50 to-black/70 z-10"></div>

            <!-- Content -->
            <div class="relative z-20 px-6 md:px-20 py-24 md:py-32 max-w-7xl mx-auto text-center">
                <div class="max-w-4xl mx-auto">
                    <span class="text-xs text-[#E5A137] uppercase tracking-[0.2em] block mb-4 md:mb-6 font-semibold">The Collection</span>
                    <h1 class="text-5xl md:text-8xl lg:text-9xl serif italic font-normal leading-none text-white mb-6 md:mb-8" style="text-shadow: 0 4px 20px rgba(0,0,0,0.5);">
                        Find Your Space
                    </h1>
                    <p class="text-white/90 font-light text-base md:text-lg lg:text-xl leading-relaxed max-w-2xl mx-auto mb-8 md:mb-12 px-4 md:px-0" style="text-shadow: 0 2px 10px rgba(0,0,0,0.5);">
                        Discover exceptional properties across London's most sought-after neighbourhoods. From luxury studios to premium apartments.
                    </p>

                    <!-- CTA Button -->
                    <div class="flex flex-col sm:flex-row gap-3 md:gap-4 justify-center items-stretch sm:items-center px-4 md:px-0">
                        <a href="#filter-bar" class="hoverable inline-flex items-center justify-center gap-2 bg-[#E5A137] hover:bg-[#C3892F] text-white px-8 md:px-10 py-3 md:py-4 rounded-full text-xs md:text-sm uppercase tracking-[0.15em] font-semibold transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105">
                            Browse Properties
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters Section (Sticky) -->
        <section class="sticky top-0 z-40 bg-[#f5f3ef]/95 backdrop-blur-sm border-b border-black/5 px-6 md:px-20 py-6 transition-all duration-300" id="filter-bar">
            <form class="flex flex-col md:flex-row gap-4 md:items-center justify-between">
                <div class="flex flex-wrap gap-4 flex-grow">
                    <!-- Location Filter -->
                    <div class="relative hoverable group">
                        <select class="custom-select w-full md:w-48 bg-transparent border border-black/20 px-4 py-3 text-xs uppercase tracking-widest outline-none focus:border-black transition-colors cursor-pointer group-hover:border-black">
                            <option value="">Location</option>
                            <option value="kensington">Kensington</option>
                            <option value="chelsea">Chelsea</option>
                            <option value="shoreditch">Shoreditch</option>
                            <option value="greenwich">Greenwich</option>
                            <option value="hackney">Hackney</option>
                        </select>
                    </div>

                    <!-- Type Filter -->
                    <div class="relative hoverable group">
                        <select class="custom-select w-full md:w-48 bg-transparent border border-black/20 px-4 py-3 text-xs uppercase tracking-widest outline-none focus:border-black transition-colors cursor-pointer group-hover:border-black">
                            <option value="">Property Type</option>
                            <option value="studio">Studio</option>
                            <option value="ensuite">En-Suite</option>
                            <option value="1bed">1 Bedroom</option>
                            <option value="2bed">2 Bedroom</option>
                        </select>
                    </div>

                </div>

                <!-- Search Input -->
                <div class="relative flex-grow md:max-w-xs hoverable">
                    <input type="text" placeholder="Search by keyword..." class="w-full bg-transparent border-b border-black/20 py-3 text-sm placeholder:text-gray-400 placeholder:italic placeholder:serif focus:border-black outline-none transition-colors">
                    <button type="submit" class="absolute right-0 top-1/2 -translate-y-1/2 text-black/50 hover:text-black transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                </div>
            </form>
        </section>

        <!-- Property Grid -->
        <section class="py-20 px-6 md:px-20 min-h-screen">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16" id="property-grid">

                <!-- Harrow Borough Property -->
                <a href="property.html?id=harrow" class="group cursor-pointer hoverable property-card block">
                    <div class="reveal-img-container aspect-[3/4] w-full mb-6 overflow-hidden">
                        <img src="assets/properties/harrow/image-1.jpg"
                             class="reveal-img group-hover:scale-105 transition-transform duration-700 ease-out" alt="Harrow">
                         <div class="reveal-overlay"></div>
                         <div class="absolute top-4 right-4 bg-[#E5A137] text-white text-[10px] uppercase tracking-widest px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                             Featured
                         </div>
                    </div>
                    <div>
                        <h3 class="text-2xl serif italic text-black mb-1 group-hover:text-[#E5A137] transition-colors">Harrow Borough</h3>
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-3">Harrow • London NW</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded">Fully Furnished</span>
                            <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded">Modern Amenities</span>
                            <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded">Bills Included</span>
                        </div>
                    </div>
                </a>


            </div>

            <!-- Load More -->
            <div class="text-center mt-24">
                <button class="border border-black/20 px-12 py-4 rounded-full text-xs uppercase tracking-widest hover:bg-black hover:text-white transition-all duration-300 hoverable">
                    Load More Spaces
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-black text-white/40 py-12 px-6 border-t border-white/10">
            <div class="flex flex-col md:flex-row justify-between items-center md:items-end text-center md:text-left">
                <div>
                    <h3 class="text-white text-2xl serif italic mb-2">Wright Key Property</h3>
                    <p class="text-xs">© 2024 All Rights Reserved.</p>
                    <div class="mt-3 space-y-1">
                        <a href="mailto:jbwrightkeyproperty@gmail.com" class="block text-xs hover:text-white transition-colors">jbwrightkeyproperty@gmail.com</a>
                        <a href="tel:07852149077" class="block text-xs hover:text-white transition-colors">Tel: 07852149077</a>
                    </div>
                </div>
                <div class="flex gap-6 mt-6 md:mt-0 text-xs uppercase tracking-widest">
                    <a href="/" class="hover:text-white transition-colors hoverable">Home</a>
                    <a href="https://instagram.com/jb_wrightkeyproperty" target="_blank" class="hover:text-white transition-colors hoverable">Instagram</a>
                </div>
            </div>
        </footer>

    </main>

    <!-- Scripts -->
    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- Custom Cursor (Desktop only) ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        const body = document.body;

        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;
            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;
            gsap.to(cursorOutline, { x: posX, y: posY, duration: 0.15, ease: "power2.out" });
        });

        const hoverables = document.querySelectorAll('.hoverable');
        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => body.classList.remove('hovering'));
        });

        // --- Preloader ---
        const loader = document.querySelector('.loader');
        const isMobileDevice = window.innerWidth < 768;
        const preloaderDuration = isMobileDevice ? 0.5 : 1;

        const tlLoader = gsap.timeline();
        tlLoader.to('#loader-text', { opacity: 1, duration: 0.3 * preloaderDuration, ease: "power2.out" })
            .to('.loader-line', { width: '100%', duration: 0.6 * preloaderDuration, ease: "power2.inOut" })
            .to('#loader-text, .loader-line', { opacity: 0, duration: 0.2 * preloaderDuration })
            .to('.loader', {
                opacity: 0,
                duration: 0.3 * preloaderDuration,
                ease: "power2.inOut",
                onComplete: () => {
                    loader.style.visibility = 'hidden';
                    loader.style.display = 'none';
                    loader.classList.remove('active');
                    document.body.style.overflow = '';
                    initPageAnimations();
                }
            });

        // Fallback timeout
        setTimeout(() => {
            if (loader && loader.style.display !== 'none') {
                loader.style.opacity = '0';
                loader.style.visibility = 'hidden';
                loader.style.display = 'none';
                loader.classList.remove('active');
                document.body.style.overflow = '';
            }
        }, 3000);

        function initPageAnimations() {
            // Hero Reveal
            gsap.from('h1', { y: 100, opacity: 0, duration: 1.5, ease: "power4.out" });

            // Reveal Overlay Images
            const revealContainers = document.querySelectorAll('.reveal-img-container');
            revealContainers.forEach(container => {
                let overlay = container.querySelector('.reveal-overlay');
                let img = container.querySelector('.reveal-img');

                let tl = gsap.timeline({
                    scrollTrigger: {
                        trigger: container,
                        start: "top 85%",
                    }
                });

                tl.to(overlay, {
                    height: "0%",
                    duration: 1.2,
                    ease: "power4.inOut"
                })
                .to(img, {
                    scale: 1,
                    duration: 1.4,
                    ease: "power2.out",
                    delay: -1.2
                });
            });

            // Image Parallax (Desktop only)
            if (!isMobileDevice) {
                const images = document.querySelectorAll('.reveal-img');
                images.forEach(img => {
                     gsap.to(img, {
                        yPercent: 10,
                        ease: "none",
                        scrollTrigger: {
                            trigger: img.parentElement,
                            start: "top bottom",
                            end: "bottom top",
                            scrub: true
                        }
                    });
                });
            }

             // Stagger for Property Cards
             gsap.from('.property-card', {
                y: 50,
                opacity: 0,
                duration: 1,
                stagger: 0.15,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: '#property-grid',
                    start: "top 85%"
                }
            });
        }

        // --- Navigation Logic ---
        const menuBtn = document.querySelector('.menu-btn');
        const closeMenu = document.querySelector('.close-menu');
        const menuOverlay = document.querySelector('.menu-overlay');
        const menuLinks = document.querySelectorAll('.menu-link');
        const tlMenu = gsap.timeline({ paused: true });

        tlMenu.to(menuOverlay, { y: "0%", duration: 0.8, ease: "expo.inOut" })
              .from(menuLinks, { y: 50, opacity: 0, duration: 0.5, stagger: 0.1, ease: "power2.out" }, "-=0.4");

        menuBtn.addEventListener('click', () => {
            tlMenu.play();
            body.style.overflow = "hidden";
            body.classList.add('menu-open');
        });
        closeMenu.addEventListener('click', () => {
            tlMenu.reverse();
            body.style.overflow = "";
            body.classList.remove('menu-open');
        });
        menuLinks.forEach(link => {
            link.addEventListener('click', () => {
                tlMenu.reverse();
                body.style.overflow = "";
                body.classList.remove('menu-open');
            });
        });

        // --- Filter and Search Functionality ---
        const locationFilter = document.querySelector('select[name="location"]') || document.querySelectorAll('.custom-select')[0];
        const typeFilter = document.querySelector('select[name="type"]') || document.querySelectorAll('.custom-select')[1];
        const searchInput = document.querySelector('input[type="text"]');
        const propertyCards = document.querySelectorAll('.property-card');

        function filterProperties() {
            const locationValue = locationFilter.value.toLowerCase();
            const typeValue = typeFilter.value.toLowerCase();
            const searchValue = searchInput.value.toLowerCase();

            propertyCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const location = card.querySelector('.text-gray-500').textContent.toLowerCase();
                const features = card.querySelector('.text-xs').textContent.toLowerCase();

                let showCard = true;

                // Location filter
                if (locationValue && !location.includes(locationValue)) {
                    showCard = false;
                }

                // Type filter
                if (typeValue && !features.includes(typeValue)) {
                    showCard = false;
                }

                // Search filter
                if (searchValue && !title.includes(searchValue) && !location.includes(searchValue)) {
                    showCard = false;
                }

                // Show/hide card with animation
                if (showCard) {
                    gsap.to(card, { opacity: 1, scale: 1, duration: 0.3, display: 'block' });
                } else {
                    gsap.to(card, { opacity: 0, scale: 0.95, duration: 0.3, onComplete: () => {
                        card.style.display = 'none';
                    }});
                }
            });
        }

        // Add event listeners
        if (locationFilter) locationFilter.addEventListener('change', filterProperties);
        if (typeFilter) typeFilter.addEventListener('change', filterProperties);
        if (searchInput) searchInput.addEventListener('input', filterProperties);

        // Add name attributes to selects for proper filtering
        if (locationFilter && !locationFilter.getAttribute('name')) {
            document.querySelectorAll('.custom-select')[0].setAttribute('name', 'location');
            document.querySelectorAll('.custom-select')[1].setAttribute('name', 'type');
            document.querySelectorAll('.custom-select')[2].setAttribute('name', 'budget');
        }

        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
