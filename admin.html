<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin | Wright Key Property</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
    <style>
        .serif { font-family: 'Cormorant Garamond', serif; }
        .tab-btn.active { background: #d4af37; color: white; }
        .save-indicator { transition: all 0.3s ease; }
        .save-indicator.saving { opacity: 1; }
        .save-indicator.saved { background: #22c55e; }
        /* Toggle switch styles */
        .toggle-switch { position: relative; width: 48px; height: 24px; flex-shrink: 0; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.3s; border-radius: 24px; }
        .toggle-slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: 0.3s; border-radius: 50%; }
        .toggle-switch input:checked + .toggle-slider { background-color: #22c55e; }
        .toggle-switch input:checked + .toggle-slider:before { transform: translateX(24px); }
        .section-hidden { opacity: 0.5; }

        /* Mobile-first responsive tabs */
        .tabs-container {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 0.5rem;
        }
        .tabs-container::-webkit-scrollbar { display: none; }
        .tab-btn { white-space: nowrap; flex-shrink: 0; }

        /* Section header responsive */
        .section-header {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        @media (min-width: 640px) {
            .section-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        /* Mobile content panels */
        @media (max-width: 639px) {
            .content-panel { padding: 1rem; }
            .image-upload-row { flex-direction: column; }
            .image-preview-mobile { width: 100%; height: 10rem; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen overflow-x-hidden">

    <!-- Header -->
    <header class="bg-black text-white py-3 px-4 sm:py-4 sm:px-6 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto">
            <!-- Mobile Header -->
            <div class="flex flex-col gap-3 sm:hidden">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-2">
                        <span class="text-sm serif italic">WKP</span>
                        <span class="text-[10px] bg-[#d4af37] px-1.5 py-0.5 rounded font-medium">ADMIN</span>
                    </div>
                    <a href="/" class="text-[10px] text-gray-400 hover:text-white">View Site</a>
                </div>
                <div class="flex items-center justify-between gap-2">
                    <span id="saveStatusMobile" class="text-[10px] text-gray-400 truncate">All changes saved</span>
                    <button onclick="saveAllContent()" class="bg-[#d4af37] text-black px-3 py-1.5 rounded text-[10px] uppercase tracking-wider hover:bg-[#b8962e] transition-colors flex-shrink-0">
                        Save Changes
                    </button>
                </div>
            </div>
            <!-- Desktop Header -->
            <div class="hidden sm:flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <a href="/" class="text-xl serif italic">Wright Key Property</a>
                    <span class="text-xs bg-[#d4af37] px-2 py-1 rounded">ADMIN</span>
                </div>
                <div class="flex items-center gap-4">
                    <span id="saveStatus" class="text-xs text-gray-400">All changes saved</span>
                    <button onclick="saveAllContent()" class="bg-[#d4af37] text-black px-4 py-2 rounded text-xs uppercase tracking-wider hover:bg-[#b8962e] transition-colors">
                        Save All Changes
                    </button>
                    <a href="/" class="text-xs text-gray-400 hover:text-white transition-colors">View Site</a>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 py-4 sm:py-8">

        <!-- Page Selector -->
        <div class="mb-4 sm:mb-6">
            <label class="block text-xs sm:text-sm text-gray-500 mb-2">Select Page to Edit</label>
            <div class="flex flex-wrap gap-2">
                <button class="page-btn active px-4 py-2 rounded-full text-xs sm:text-sm border-2 border-[#d4af37] bg-[#d4af37] text-white" onclick="selectPage('home')">Home</button>
                <button class="page-btn px-4 py-2 rounded-full text-xs sm:text-sm border-2 border-gray-300 bg-white text-gray-700" onclick="selectPage('coliving')">Co-Living</button>
                <button class="page-btn px-4 py-2 rounded-full text-xs sm:text-sm border-2 border-gray-300 bg-white text-gray-700" onclick="selectPage('investor')">Investor</button>
                <button class="page-btn px-4 py-2 rounded-full text-xs sm:text-sm border-2 border-gray-300 bg-white text-gray-700" onclick="selectPage('search')">Search</button>
            </div>
        </div>

        <!-- Tabs for Home Page -->
        <div id="home-tabs" class="page-tabs">
            <div class="tabs-container mb-6 sm:mb-8">
                <button class="tab-btn active px-3 sm:px-4 py-2 rounded text-xs sm:text-sm" onclick="showTab('header')">Header</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('hero')">Hero</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('about')">About</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('stats')">Stats</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('investors')">Investors</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('sourcing')">Sourcing</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('contact')">Contact</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('footer')">Footer</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('media')">Media</button>
            </div>
        </div>

        <!-- Tabs for Co-Living Page -->
        <div id="coliving-tabs" class="page-tabs hidden">
            <div class="tabs-container mb-6 sm:mb-8">
                <button class="tab-btn active px-3 sm:px-4 py-2 rounded text-xs sm:text-sm" onclick="showTab('coliving-hero')">Hero</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('coliving-community')">Community</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('coliving-amenities')">Amenities</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('coliving-spaces')">Featured Spaces</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('coliving-cta')">CTA Section</button>
            </div>
        </div>

        <!-- Tabs for Investor Page -->
        <div id="investor-tabs" class="page-tabs hidden">
            <div class="tabs-container mb-6 sm:mb-8">
                <button class="tab-btn active px-3 sm:px-4 py-2 rounded text-xs sm:text-sm" onclick="showTab('investor-hero')">Hero</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('investor-strategy')">Strategy</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('investor-metrics')">Metrics</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('investor-process')">Process</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('investor-cta')">CTA Section</button>
            </div>
        </div>

        <!-- Tabs for Search Page -->
        <div id="search-tabs" class="page-tabs hidden">
            <div class="tabs-container mb-6 sm:mb-8">
                <button class="tab-btn active px-3 sm:px-4 py-2 rounded text-xs sm:text-sm" onclick="showTab('search-hero')">Hero</button>
                <button class="tab-btn px-3 sm:px-4 py-2 rounded text-xs sm:text-sm bg-white" onclick="showTab('search-filters')">Filters</button>
            </div>
        </div>

        <!-- Header/Menu Tab -->
        <div id="tab-header" class="tab-content">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">Header & Navigation</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Header</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="header_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Logo Text</label>
                        <input type="text" id="header_logo_text" class="w-full border rounded px-3 py-2 text-sm" value="Wright Key Property">
                    </div>

                    <div class="pt-4 sm:pt-6 border-t">
                        <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Logo Image (Optional)</h3>
                        <div class="flex flex-col sm:flex-row sm:items-start gap-4">
                            <div id="logoPreview" class="w-full sm:w-48 h-20 sm:h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0">
                                <span class="text-gray-400 text-sm">No logo</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex gap-2 mb-2">
                                    <input type="file" id="logoInput" accept="image/*" class="hidden" onchange="uploadLogo(this)">
                                    <button onclick="document.getElementById('logoInput').click()" class="bg-black text-white px-3 sm:px-4 py-2 rounded text-xs sm:text-sm hover:bg-gray-800 transition-colors">
                                        Upload
                                    </button>
                                    <button onclick="removeLogo()" class="text-red-500 text-xs sm:text-sm hover:underline px-2">Remove</button>
                                </div>
                                <div class="flex gap-2">
                                    <input type="text" id="logo_url_input" placeholder="Or paste image URL..." class="flex-1 border rounded px-3 py-2 text-xs sm:text-sm">
                                    <button onclick="setLogoUrl()" class="bg-gray-200 px-2 sm:px-3 py-2 rounded text-xs sm:text-sm hover:bg-gray-300">Set URL</button>
                                </div>
                                <p class="text-[10px] sm:text-xs text-gray-400 mt-2">PNG with transparent background recommended.</p>
                            </div>
                        </div>
                    </div>

                    <div class="pt-4 sm:pt-6 border-t">
                        <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Menu Items</h3>
                        <div class="space-y-3 sm:space-y-4">
                            <div class="menu-item-grid grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 p-3 sm:p-4 border rounded">
                                <div>
                                    <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Menu Item 1</label>
                                    <input type="text" id="menu_item1_text" class="w-full border rounded px-2 sm:px-3 py-1.5 sm:py-2 text-sm" value="Home">
                                </div>
                                <div class="flex items-center sm:items-end">
                                    <label class="flex items-center gap-2 text-xs sm:text-sm">
                                        <input type="checkbox" id="menu_item1_visible" checked>
                                        Show
                                    </label>
                                </div>
                            </div>
                            <div class="menu-item-grid grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 p-3 sm:p-4 border rounded">
                                <div>
                                    <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Menu Item 2</label>
                                    <input type="text" id="menu_item2_text" class="w-full border rounded px-2 sm:px-3 py-1.5 sm:py-2 text-sm" value="Browse">
                                </div>
                                <div class="flex items-center sm:items-end">
                                    <label class="flex items-center gap-2 text-xs sm:text-sm">
                                        <input type="checkbox" id="menu_item2_visible" checked>
                                        Show
                                    </label>
                                </div>
                            </div>
                            <div class="menu-item-grid grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 p-3 sm:p-4 border rounded">
                                <div>
                                    <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Menu Item 3</label>
                                    <input type="text" id="menu_item3_text" class="w-full border rounded px-2 sm:px-3 py-1.5 sm:py-2 text-sm" value="Co-Living">
                                </div>
                                <div class="flex items-center sm:items-end">
                                    <label class="flex items-center gap-2 text-xs sm:text-sm">
                                        <input type="checkbox" id="menu_item3_visible" checked>
                                        Show
                                    </label>
                                </div>
                            </div>
                            <div class="menu-item-grid grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 p-3 sm:p-4 border rounded">
                                <div>
                                    <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Menu Item 4</label>
                                    <input type="text" id="menu_item4_text" class="w-full border rounded px-2 sm:px-3 py-1.5 sm:py-2 text-sm" value="For Investors">
                                </div>
                                <div class="flex items-center sm:items-end">
                                    <label class="flex items-center gap-2 text-xs sm:text-sm">
                                        <input type="checkbox" id="menu_item4_visible" checked>
                                        Show
                                    </label>
                                </div>
                            </div>
                            <div class="menu-item-grid grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 p-3 sm:p-4 border rounded">
                                <div>
                                    <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Menu Item 5</label>
                                    <input type="text" id="menu_item5_text" class="w-full border rounded px-2 sm:px-3 py-1.5 sm:py-2 text-sm" value="Contact">
                                </div>
                                <div class="flex items-center sm:items-end">
                                    <label class="flex items-center gap-2 text-xs sm:text-sm">
                                        <input type="checkbox" id="menu_item5_visible" checked>
                                        Show
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Strip Tab -->
        <div id="tab-stats" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">Stats Strip / Marquee</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="stats_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <p class="text-gray-500 text-xs sm:text-sm mb-4 sm:mb-6">The scrolling text strip between the About and Investors sections.</p>

                <div class="space-y-4">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Marquee Items (one per line)</label>
                        <textarea id="stats_items" class="w-full border rounded px-3 py-2 text-sm" rows="6">London Service Area
Luxury HMO Refurbishment
Professional Tenants
NHS Housing Partners
Student Accommodation
Guaranteed Rent Options</textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hero Section Tab -->
        <div id="tab-hero" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">Hero Section</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="hero_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline (Line 1)</label>
                        <input type="text" id="hero_headline1" class="w-full border rounded px-3 py-2 text-sm" value="Unlocking">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline (Line 2)</label>
                        <input type="text" id="hero_headline2" class="w-full border rounded px-3 py-2 text-sm" value="Luxury">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline (Line 3)</label>
                        <input type="text" id="hero_headline3" class="w-full border rounded px-3 py-2 text-sm" value="Living">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Subheadline</label>
                        <textarea id="hero_subheadline" class="w-full border rounded px-3 py-2 text-sm" rows="2">Transforming properties into exceptional co-living spaces for professionals, NHS staff, and students.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 1 Text</label>
                        <input type="text" id="hero_cta1_text" class="w-full border rounded px-3 py-2 text-sm" value="Browse Properties">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 1 Link</label>
                        <input type="text" id="hero_cta1_link" class="w-full border rounded px-3 py-2 text-sm" value="/search">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 2 Text</label>
                        <input type="text" id="hero_cta2_text" class="w-full border rounded px-3 py-2 text-sm" value="Room Suites">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 2 Link</label>
                        <input type="text" id="hero_cta2_link" class="w-full border rounded px-3 py-2 text-sm" value="/coliving">
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Hero Video</h3>
                    <div class="flex flex-col sm:flex-row sm:items-start gap-4">
                        <div id="heroVideoPreview" class="w-full sm:w-48 h-32 bg-gray-200 rounded flex items-center justify-center flex-shrink-0">
                            <span class="text-gray-400 text-sm">No video</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex gap-2 mb-2">
                                <input type="file" id="heroVideoInput" accept="video/*" class="hidden" onchange="uploadHeroVideo(this)">
                                <button onclick="document.getElementById('heroVideoInput').click()" class="bg-black text-white px-3 sm:px-4 py-2 rounded text-xs sm:text-sm hover:bg-gray-800 transition-colors">
                                    Upload
                                </button>
                                <button onclick="removeHeroVideo()" class="text-red-500 text-xs sm:text-sm hover:underline px-2">Remove</button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="hero_video_url_input" placeholder="Or paste video URL..." class="flex-1 border rounded px-3 py-2 text-xs sm:text-sm">
                                <button onclick="setHeroVideoUrl()" class="bg-gray-200 px-2 sm:px-3 py-2 rounded text-xs sm:text-sm hover:bg-gray-300">Set URL</button>
                            </div>
                            <p class="text-[10px] sm:text-xs text-gray-400 mt-2">MP4, 1920x1080 or higher recommended.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Section Tab -->
        <div id="tab-about" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">About / Our Story</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="about_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="about_label" class="w-full border rounded px-3 py-2 text-sm" value="Our Story — 01">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <textarea id="about_headline" class="w-full border rounded px-3 py-2 text-sm" rows="2">We breathe new life into dated properties, curating spaces that inspire connection.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Paragraph 1</label>
                        <textarea id="about_paragraph1" class="w-full border rounded px-3 py-2 text-sm" rows="3">At Wright Key Property, we don't just renovate; we reimagine. We specialize in acquiring HMO conversions and refurbishing them to a boutique luxury standard.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Paragraph 2</label>
                        <textarea id="about_paragraph2" class="w-full border rounded px-3 py-2 text-sm" rows="3">Our service area is London, where the demand for high-quality, flexible living is ever-growing. We cater specifically to those who keep the city moving: working professionals and NHS staff.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Link Text</label>
                        <input type="text" id="about_link_text" class="w-full border rounded px-3 py-2 text-sm" value="Our Story">
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">About Images</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Image</label>
                            <div id="aboutImage1Preview" class="w-full h-36 sm:h-48 bg-gray-200 rounded flex items-center justify-center mb-2">
                                <span class="text-gray-400 text-xs sm:text-sm">No image</span>
                            </div>
                            <div class="flex gap-2 mb-2">
                                <input type="file" id="aboutImage1Input" accept="image/*" class="hidden" onchange="uploadAboutImage(this, 1)">
                                <button onclick="document.getElementById('aboutImage1Input').click()" class="bg-black text-white px-3 py-1.5 rounded text-xs">Upload</button>
                                <button onclick="removeAboutImage(1)" class="text-red-500 text-xs hover:underline">Remove</button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="about_image1_url_input" placeholder="Or paste URL..." class="flex-1 border rounded px-2 py-1.5 text-xs">
                                <button onclick="setAboutImageUrl(1)" class="bg-gray-200 px-2 py-1.5 rounded text-xs">Set</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Detail Image</label>
                            <div id="aboutImage2Preview" class="w-full h-36 sm:h-48 bg-gray-200 rounded flex items-center justify-center mb-2">
                                <span class="text-gray-400 text-xs sm:text-sm">No image</span>
                            </div>
                            <div class="flex gap-2 mb-2">
                                <input type="file" id="aboutImage2Input" accept="image/*" class="hidden" onchange="uploadAboutImage(this, 2)">
                                <button onclick="document.getElementById('aboutImage2Input').click()" class="bg-black text-white px-3 py-1.5 rounded text-xs">Upload</button>
                                <button onclick="removeAboutImage(2)" class="text-red-500 text-xs hover:underline">Remove</button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="about_image2_url_input" placeholder="Or paste URL..." class="flex-1 border rounded px-2 py-1.5 text-xs">
                                <button onclick="setAboutImageUrl(2)" class="bg-gray-200 px-2 py-1.5 rounded text-xs">Set</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investors Section Tab -->
        <div id="tab-investors" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">For Investors</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="investors_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="investors_label" class="w-full border rounded px-3 py-2 text-sm" value="Investment Opportunities">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <input type="text" id="investors_headline" class="w-full border rounded px-3 py-2 text-sm" value="Hands-off Investment">
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Investment Cards</h3>

                    <div class="space-y-4 sm:space-y-6">
                        <div class="p-3 sm:p-4 border rounded">
                            <h4 class="font-medium mb-2 sm:mb-3 text-sm sm:text-base">Card 1</h4>
                            <input type="text" id="investor_card1_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Sourcing Deals">
                            <textarea id="investor_card1_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">We leverage our extensive network to find off-market properties with high potential, bypassing the competitive open market.</textarea>
                        </div>
                        <div class="p-3 sm:p-4 border rounded">
                            <h4 class="font-medium mb-2 sm:mb-3 text-sm sm:text-base">Card 2</h4>
                            <input type="text" id="investor_card2_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Power Team">
                            <textarea id="investor_card2_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">From architects to contractors, we have a trusted team in place to execute refurbishments to a luxury standard on time and budget.</textarea>
                        </div>
                        <div class="p-3 sm:p-4 border rounded">
                            <h4 class="font-medium mb-2 sm:mb-3 text-sm sm:text-base">Card 3</h4>
                            <input type="text" id="investor_card3_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Passive Income">
                            <textarea id="investor_card3_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Enjoy the returns of property investment without the headache. We manage the process from acquisition to tenanting.</textarea>
                        </div>
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Investment Image</h3>
                    <div id="investorImagePreview" class="w-full h-36 sm:h-48 bg-gray-200 rounded flex items-center justify-center mb-2">
                        <span class="text-gray-400 text-xs sm:text-sm">No image</span>
                    </div>
                    <div class="flex gap-2 mb-2">
                        <input type="file" id="investorImageInput" accept="image/*" class="hidden" onchange="uploadInvestorImage(this)">
                        <button onclick="document.getElementById('investorImageInput').click()" class="bg-black text-white px-3 py-1.5 rounded text-xs">Upload</button>
                        <button onclick="removeInvestorImage()" class="text-red-500 text-xs hover:underline">Remove</button>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="investor_image_url_input" placeholder="Or paste image URL..." class="flex-1 border rounded px-2 py-1.5 text-xs">
                        <button onclick="setInvestorImageUrl()" class="bg-gray-200 px-2 py-1.5 rounded text-xs">Set URL</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sourcing Section Tab -->
        <div id="tab-sourcing" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">We Buy Properties</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="sourcing_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Headline (Line 1)</label>
                        <input type="text" id="sourcing_headline1" class="w-full border rounded px-3 py-2 text-sm" value="We Buy Properties">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Headline (Line 2 - Italic)</label>
                        <input type="text" id="sourcing_headline2" class="w-full border rounded px-3 py-2 text-sm" value="In Any Condition.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Description</label>
                        <textarea id="sourcing_description" class="w-full border rounded px-3 py-2 text-sm" rows="3">Have a dated property? An HMO conversion that needs work? We offer a swift, hassle-free selling process for property owners in London.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Button Text</label>
                        <input type="text" id="sourcing_button_text" class="w-full border rounded px-3 py-2 text-sm" value="Get an Offer">
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <h3 class="text-base sm:text-lg font-medium mb-3 sm:mb-4">Before/After Images</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Before Image</label>
                            <div id="beforeImagePreview" class="w-full h-36 sm:h-48 bg-gray-200 rounded flex items-center justify-center mb-2">
                                <span class="text-gray-400 text-xs sm:text-sm">No image</span>
                            </div>
                            <div class="flex gap-2 mb-2">
                                <input type="file" id="beforeImageInput" accept="image/*" class="hidden" onchange="uploadSourcingImage(this, 'before')">
                                <button onclick="document.getElementById('beforeImageInput').click()" class="bg-black text-white px-3 py-1.5 rounded text-xs">Upload</button>
                                <button onclick="removeSourcingImage('before')" class="text-red-500 text-xs hover:underline">Remove</button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="before_image_url_input" placeholder="Or paste URL..." class="flex-1 border rounded px-2 py-1.5 text-xs">
                                <button onclick="setSourcingImageUrl('before')" class="bg-gray-200 px-2 py-1.5 rounded text-xs">Set</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">After Image</label>
                            <div id="afterImagePreview" class="w-full h-36 sm:h-48 bg-gray-200 rounded flex items-center justify-center mb-2">
                                <span class="text-gray-400 text-xs sm:text-sm">No image</span>
                            </div>
                            <div class="flex gap-2 mb-2">
                                <input type="file" id="afterImageInput" accept="image/*" class="hidden" onchange="uploadSourcingImage(this, 'after')">
                                <button onclick="document.getElementById('afterImageInput').click()" class="bg-black text-white px-3 py-1.5 rounded text-xs">Upload</button>
                                <button onclick="removeSourcingImage('after')" class="text-red-500 text-xs hover:underline">Remove</button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="after_image_url_input" placeholder="Or paste URL..." class="flex-1 border rounded px-2 py-1.5 text-xs">
                                <button onclick="setSourcingImageUrl('after')" class="bg-gray-200 px-2 py-1.5 rounded text-xs">Set</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Section Tab -->
        <div id="tab-contact" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">Contact Section</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Section</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="contact_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="contact_label" class="w-full border rounded px-3 py-2 text-sm" value="Start the Conversation">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <input type="text" id="contact_headline" class="w-full border rounded px-3 py-2 text-sm" value="Let's Talk.">
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Email</label>
                            <input type="email" id="contact_email" class="w-full border rounded px-3 py-2 text-sm" value="jbwrightkeyproperty@gmail.com">
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Phone</label>
                            <input type="text" id="contact_phone" class="w-full border rounded px-3 py-2 text-sm" value="07852149077">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Office Address</label>
                        <textarea id="contact_address" class="w-full border rounded px-3 py-2 text-sm" rows="2">London, UK
By Appointment Only</textarea>
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <div class="flex justify-between items-center mb-3 sm:mb-4">
                        <h3 class="text-base sm:text-lg font-medium">Form Fields</h3>
                        <button onclick="addFormField()" class="bg-[#d4af37] text-black px-3 py-1.5 rounded text-xs hover:bg-[#b8962e] transition-colors">
                            + Add Field
                        </button>
                    </div>
                    <div id="formFieldsContainer" class="space-y-3 sm:space-y-4">
                        <!-- Dynamic form fields will be rendered here -->
                    </div>
                </div>

                <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Submit Button Text</label>
                        <input type="text" id="form_submit_text" class="w-full border rounded px-3 py-2 text-sm" value="Send Message">
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Tab -->
        <div id="tab-footer" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <div class="section-header mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl serif italic">Footer</h2>
                    <div class="flex items-center gap-3">
                        <span class="text-xs sm:text-sm text-gray-500">Show Footer</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="footer_visible" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Company Name</label>
                        <input type="text" id="footer_company" class="w-full border rounded px-3 py-2 text-sm" value="Wright Key Property">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Copyright Text</label>
                        <input type="text" id="footer_copyright" class="w-full border rounded px-3 py-2 text-sm" value="© 2024 All Rights Reserved.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Instagram URL</label>
                        <input type="text" id="footer_instagram" class="w-full border rounded px-3 py-2 text-sm" value="https://instagram.com/jb_wrightkeyproperty">
                    </div>
                </div>
            </div>
        </div>

        <!-- Media Library Tab -->
        <div id="tab-media" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Media Library</h2>
                <p class="text-gray-500 text-xs sm:text-sm mb-4">Manage all uploaded images and videos. Click on any item to copy its URL.</p>

                <div class="mb-4 sm:mb-6">
                    <input type="file" id="mediaUploadInput" accept="image/*,video/*" class="hidden" onchange="uploadMedia(this)" multiple>
                    <button onclick="document.getElementById('mediaUploadInput').click()" class="bg-[#d4af37] text-black px-3 sm:px-4 py-2 rounded text-xs sm:text-sm hover:bg-[#b8962e] transition-colors">
                        Upload New Media
                    </button>
                </div>

                <div id="mediaGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 sm:gap-4">
                    <!-- Media items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- ==================== CO-LIVING PAGE SECTIONS ==================== -->

        <!-- Co-Living Hero -->
        <div id="tab-coliving-hero" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Co-Living Hero Section</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Label Text</label>
                        <input type="text" id="coliving_hero_label" class="w-full border rounded px-3 py-2 text-sm" value="London Living Redefined">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <input type="text" id="coliving_hero_headline" class="w-full border rounded px-3 py-2 text-sm" value="Curated Co-Living">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Subheadline</label>
                        <textarea id="coliving_hero_subheadline" class="w-full border rounded px-3 py-2 text-sm" rows="3">Exceptional rooms in the heart of London. We cater to those who drive the city forward, creating spaces that foster community without compromising on luxury.</textarea>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 1 Text</label>
                            <input type="text" id="coliving_hero_cta1_text" class="w-full border rounded px-3 py-2 text-sm" value="View Properties">
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 2 Text</label>
                            <input type="text" id="coliving_hero_cta2_text" class="w-full border rounded px-3 py-2 text-sm" value="Learn More">
                        </div>
                    </div>
                    <div class="pt-4 border-t">
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Background Image URL</label>
                        <input type="text" id="coliving_hero_bg" class="w-full border rounded px-3 py-2 text-sm" placeholder="https://...">
                    </div>
                </div>
            </div>
        </div>

        <!-- Co-Living Community -->
        <div id="tab-coliving-community" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Community Section (Who We Serve)</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="coliving_community_label" class="w-full border rounded px-3 py-2 text-sm" value="Our Community">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Title</label>
                        <input type="text" id="coliving_community_title" class="w-full border rounded px-3 py-2 text-sm" value="Who We Serve">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Description</label>
                        <textarea id="coliving_community_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">We create bespoke living experiences for London's most vital communities.</textarea>
                    </div>

                    <!-- Card 1: Professionals -->
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Card 1: Young Professionals</h4>
                        <input type="text" id="coliving_card1_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Young Professionals">
                        <textarea id="coliving_card1_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Designed for ambitious individuals building their careers in the heart of London.</textarea>
                    </div>

                    <!-- Card 2: NHS -->
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Card 2: NHS Staff</h4>
                        <input type="text" id="coliving_card2_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="NHS Staff">
                        <textarea id="coliving_card2_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Supporting those who support us all. Convenient locations, flexible terms.</textarea>
                    </div>

                    <!-- Card 3: Students -->
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Card 3: Students</h4>
                        <input type="text" id="coliving_card3_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Students">
                        <textarea id="coliving_card3_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Elevate your university experience. Modern, safe, and social spaces.</textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Co-Living Amenities -->
        <div id="tab-coliving-amenities" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">The Standard (Amenities)</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="coliving_amenities_label" class="w-full border rounded px-3 py-2 text-sm" value="The Standard">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Title</label>
                        <input type="text" id="coliving_amenities_title" class="w-full border rounded px-3 py-2 text-sm" value="Inclusive Living">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Description</label>
                        <textarea id="coliving_amenities_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">We take care of the details so you can focus on living.</textarea>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 1</label>
                            <input type="text" id="coliving_amenity1_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="High-Speed Wifi">
                            <input type="text" id="coliving_amenity1_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Fibre optic broadband included">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 2</label>
                            <input type="text" id="coliving_amenity2_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="All Bills Included">
                            <input type="text" id="coliving_amenity2_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Gas, electricity, water covered">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 3</label>
                            <input type="text" id="coliving_amenity3_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Weekly Cleaning">
                            <input type="text" id="coliving_amenity3_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Common areas professionally cleaned">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 4</label>
                            <input type="text" id="coliving_amenity4_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Community Manager">
                            <input type="text" id="coliving_amenity4_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Dedicated support for any issues">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 5</label>
                            <input type="text" id="coliving_amenity5_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Fully Furnished">
                            <input type="text" id="coliving_amenity5_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Designer furniture packages">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Amenity 6</label>
                            <input type="text" id="coliving_amenity6_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Prime Locations">
                            <input type="text" id="coliving_amenity6_desc" class="w-full border rounded px-2 py-1.5 text-xs" value="Close to transport and amenities">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Co-Living Featured Spaces -->
        <div id="tab-coliving-spaces" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Featured Spaces</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="coliving_spaces_label" class="w-full border rounded px-3 py-2 text-sm" value="Availability">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Title</label>
                        <input type="text" id="coliving_spaces_title" class="w-full border rounded px-3 py-2 text-sm" value="Featured Spaces">
                    </div>
                    <p class="text-xs text-gray-500">Note: Properties are managed separately. This section controls the labels only.</p>
                </div>
            </div>
        </div>

        <!-- Co-Living CTA -->
        <div id="tab-coliving-cta" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">CTA Section</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Label</label>
                        <input type="text" id="coliving_cta_label" class="w-full border rounded px-3 py-2 text-sm" value="Interested?">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Headline</label>
                        <input type="text" id="coliving_cta_headline" class="w-full border rounded px-3 py-2 text-sm" value="Book a viewing today.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Subtext</label>
                        <input type="text" id="coliving_cta_subtext" class="w-full border rounded px-3 py-2 text-sm" value="Spaces fill quickly.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Button Text</label>
                        <input type="text" id="coliving_cta_button" class="w-full border rounded px-3 py-2 text-sm" value="Contact Team">
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== INVESTOR PAGE SECTIONS ==================== -->

        <!-- Investor Hero -->
        <div id="tab-investor-hero" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Investor Hero Section</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Label Text</label>
                        <input type="text" id="investor_hero_label" class="w-full border rounded px-3 py-2 text-sm" value="Capital Growth & Yield">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <input type="text" id="investor_hero_headline" class="w-full border rounded px-3 py-2 text-sm" value="Intelligent Investment">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Subheadline</label>
                        <textarea id="investor_hero_subheadline" class="w-full border rounded px-3 py-2 text-sm" rows="3">We specialise in sourcing and developing high-yield HMO opportunities in London. A completely hands-off experience for the modern investor.</textarea>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 1 Text</label>
                            <input type="text" id="investor_hero_cta1_text" class="w-full border rounded px-3 py-2 text-sm" value="Get Started">
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button 2 Text</label>
                            <input type="text" id="investor_hero_cta2_text" class="w-full border rounded px-3 py-2 text-sm" value="View Metrics">
                        </div>
                    </div>
                    <div class="pt-4 border-t">
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Background Image URL</label>
                        <input type="text" id="investor_hero_bg" class="w-full border rounded px-3 py-2 text-sm" placeholder="https://...">
                    </div>
                </div>
            </div>
        </div>

        <!-- Investor Strategy -->
        <div id="tab-investor-strategy" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Strategy (3 Pillars)</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Pillar 1: Sourcing</h4>
                        <input type="text" id="investor_pillar1_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Sourcing">
                        <textarea id="investor_pillar1_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">We leverage deep local networks to identify off-market properties with significant value-add potential.</textarea>
                    </div>
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Pillar 2: Development</h4>
                        <input type="text" id="investor_pillar2_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Development">
                        <textarea id="investor_pillar2_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Our power team of architects and contractors handle the full refurbishment.</textarea>
                    </div>
                    <div class="p-3 sm:p-4 border rounded bg-gray-50">
                        <h4 class="font-medium mb-3 text-sm sm:text-base">Pillar 3: Management</h4>
                        <input type="text" id="investor_pillar3_title" class="w-full border rounded px-3 py-2 mb-2 text-sm" value="Management">
                        <textarea id="investor_pillar3_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Truly passive income. We tenant the property with vetted professionals and NHS staff.</textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investor Metrics -->
        <div id="tab-investor-metrics" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Metrics Section</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Title</label>
                        <input type="text" id="investor_metrics_title" class="w-full border rounded px-3 py-2 text-sm" value="The Metrics.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Description</label>
                        <textarea id="investor_metrics_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Our model is built on data, not guesswork. We focus on areas with strong fundamentals.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Button Text</label>
                        <input type="text" id="investor_metrics_button" class="w-full border rounded px-3 py-2 text-sm" value="Request Case Studies">
                    </div>

                    <div class="grid grid-cols-2 gap-4 pt-4 border-t">
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Stat 1</label>
                            <input type="text" id="investor_stat1_value" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="12%">
                            <input type="text" id="investor_stat1_label" class="w-full border rounded px-2 py-1.5 text-xs" value="Target Yield">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Stat 2</label>
                            <input type="text" id="investor_stat2_value" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="6 Months">
                            <input type="text" id="investor_stat2_label" class="w-full border rounded px-2 py-1.5 text-xs" value="Avg Refurb Time">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Stat 3</label>
                            <input type="text" id="investor_stat3_value" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="100%">
                            <input type="text" id="investor_stat3_label" class="w-full border rounded px-2 py-1.5 text-xs" value="Hands Off">
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Stat 4</label>
                            <input type="text" id="investor_stat4_value" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="50+">
                            <input type="text" id="investor_stat4_label" class="w-full border rounded px-2 py-1.5 text-xs" value="Properties">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investor Process -->
        <div id="tab-investor-process" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">The Process (How It Works)</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Label</label>
                        <input type="text" id="investor_process_label" class="w-full border rounded px-3 py-2 text-sm" value="The Journey">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Section Title</label>
                        <input type="text" id="investor_process_title" class="w-full border rounded px-3 py-2 text-sm" value="How It Works">
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t">
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Step 1</label>
                            <input type="text" id="investor_step1_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Consultation">
                            <textarea id="investor_step1_desc" class="w-full border rounded px-2 py-1.5 text-xs" rows="2">We analyze your capital and goals to build a tailored investment strategy.</textarea>
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Step 2</label>
                            <input type="text" id="investor_step2_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Acquisition">
                            <textarea id="investor_step2_desc" class="w-full border rounded px-2 py-1.5 text-xs" rows="2">We source, view, and negotiate the deal, securing it below market value.</textarea>
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Step 3</label>
                            <input type="text" id="investor_step3_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Transformation">
                            <textarea id="investor_step3_desc" class="w-full border rounded px-2 py-1.5 text-xs" rows="2">Our team strips out and refurbishes the property to luxury standards.</textarea>
                        </div>
                        <div class="p-3 border rounded">
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Step 4</label>
                            <input type="text" id="investor_step4_title" class="w-full border rounded px-2 py-1.5 mb-1 text-sm" value="Income">
                            <textarea id="investor_step4_desc" class="w-full border rounded px-2 py-1.5 text-xs" rows="2">Tenants move in. You receive monthly reports and returns.</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investor CTA -->
        <div id="tab-investor-cta" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">CTA / Partner Section</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Headline</label>
                        <input type="text" id="investor_cta_headline" class="w-full border rounded px-3 py-2 text-sm" value="Partner With Us.">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Description</label>
                        <textarea id="investor_cta_desc" class="w-full border rounded px-3 py-2 text-sm" rows="2">Access our private investor list to receive new off-market opportunities directly to your inbox.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Form Button Text</label>
                        <input type="text" id="investor_cta_button" class="w-full border rounded px-3 py-2 text-sm" value="Request Investor Pack">
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== SEARCH PAGE SECTIONS ==================== -->

        <!-- Search Hero -->
        <div id="tab-search-hero" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Search Page Hero</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Label Text</label>
                        <input type="text" id="search_hero_label" class="w-full border rounded px-3 py-2 text-sm" value="The Collection">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Main Headline</label>
                        <input type="text" id="search_hero_headline" class="w-full border rounded px-3 py-2 text-sm" value="Find Your Space">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Subheadline</label>
                        <textarea id="search_hero_subheadline" class="w-full border rounded px-3 py-2 text-sm" rows="3">Discover exceptional properties across London's most sought-after neighbourhoods. From luxury studios to premium apartments.</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">CTA Button Text</label>
                        <input type="text" id="search_hero_cta_text" class="w-full border rounded px-3 py-2 text-sm" value="Browse Properties">
                    </div>
                    <div class="pt-4 border-t">
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Background Image URL</label>
                        <input type="text" id="search_hero_bg" class="w-full border rounded px-3 py-2 text-sm" placeholder="https://...">
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Filters -->
        <div id="tab-search-filters" class="tab-content hidden">
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mb-4 sm:mb-6">
                <h2 class="text-xl sm:text-2xl serif italic mb-4 sm:mb-6">Filter Options</h2>
                <div class="space-y-4 sm:space-y-6">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Location Options (one per line)</label>
                        <textarea id="search_locations" class="w-full border rounded px-3 py-2 text-sm" rows="6">Kensington
Chelsea
Shoreditch
Greenwich
Hackney</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Property Type Options (one per line)</label>
                        <textarea id="search_types" class="w-full border rounded px-3 py-2 text-sm" rows="4">Studio
En-Suite
1 Bedroom
2 Bedroom</textarea>
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Search Placeholder</label>
                        <input type="text" id="search_placeholder" class="w-full border rounded px-3 py-2 text-sm" value="Search by keyword...">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2">Load More Button Text</label>
                        <input type="text" id="search_loadmore_text" class="w-full border rounded px-3 py-2 text-sm" value="Load More Spaces">
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // Content storage
        let siteContent = {};
        let currentPage = 'home';

        // Dynamic form fields storage
        let formFields = [
            { label: 'Name', type: 'text', placeholder: 'Your Name', required: true },
            { label: 'Email', type: 'email', placeholder: 'Your Email', required: true },
            { label: 'Enquiry Type', type: 'select', placeholder: '', required: true, options: ['Property Enquiry', 'Investor Enquiry', 'Sell My Property', 'Other'] },
            { label: 'Message', type: 'textarea', placeholder: 'Your Message', required: true }
        ];

        // Field types available
        const fieldTypes = [
            { value: 'text', label: 'Text Input' },
            { value: 'email', label: 'Email Input' },
            { value: 'tel', label: 'Phone Input' },
            { value: 'textarea', label: 'Text Area' },
            { value: 'select', label: 'Dropdown Select' }
        ];

        // Add a new form field
        function addFormField() {
            formFields.push({
                label: 'New Field',
                type: 'text',
                placeholder: 'Enter value...',
                required: false,
                options: []
            });
            renderFormFields();
        }

        // Remove a form field
        function removeFormField(index) {
            if (formFields.length <= 1) {
                alert('You must have at least one form field');
                return;
            }
            formFields.splice(index, 1);
            renderFormFields();
        }

        // Update field property
        function updateFieldProp(index, prop, value) {
            formFields[index][prop] = value;
            if (prop === 'type') {
                // If changing to select, initialize options array
                if (value === 'select' && !formFields[index].options) {
                    formFields[index].options = ['Option 1'];
                }
                renderFormFields();
            }
        }

        // Add option to select field
        function addFieldOption(index) {
            if (!formFields[index].options) {
                formFields[index].options = [];
            }
            formFields[index].options.push('New Option');
            renderFormFields();
        }

        // Remove option from select field
        function removeFieldOption(fieldIndex, optionIndex) {
            if (formFields[fieldIndex].options.length <= 1) {
                alert('You must have at least one option');
                return;
            }
            formFields[fieldIndex].options.splice(optionIndex, 1);
            renderFormFields();
        }

        // Update option value
        function updateFieldOption(fieldIndex, optionIndex, value) {
            formFields[fieldIndex].options[optionIndex] = value;
        }

        // Render all form fields
        function renderFormFields() {
            const container = document.getElementById('formFieldsContainer');
            if (!container) return;

            container.innerHTML = formFields.map((field, index) => `
                <div class="p-3 sm:p-4 border rounded bg-gray-50">
                    <div class="flex justify-between items-start mb-3">
                        <span class="text-xs sm:text-sm font-medium text-gray-600">Field ${index + 1}</span>
                        <button onclick="removeFormField(${index})" class="text-red-500 text-xs hover:underline">Remove</button>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
                        <div>
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Label</label>
                            <input type="text" value="${field.label}" onchange="updateFieldProp(${index}, 'label', this.value)" class="w-full border rounded px-2 py-1.5 text-sm">
                        </div>
                        <div>
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Type</label>
                            <select onchange="updateFieldProp(${index}, 'type', this.value)" class="w-full border rounded px-2 py-1.5 text-sm">
                                ${fieldTypes.map(t => `<option value="${t.value}" ${field.type === t.value ? 'selected' : ''}>${t.label}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <div>
                            <label class="block text-[10px] sm:text-xs text-gray-500 mb-1">Placeholder</label>
                            <input type="text" value="${field.placeholder || ''}" onchange="updateFieldProp(${index}, 'placeholder', this.value)" class="w-full border rounded px-2 py-1.5 text-sm">
                        </div>
                        <div class="flex items-end">
                            <label class="flex items-center gap-2 text-xs sm:text-sm">
                                <input type="checkbox" ${field.required ? 'checked' : ''} onchange="updateFieldProp(${index}, 'required', this.checked)">
                                Required
                            </label>
                        </div>
                    </div>
                    ${field.type === 'select' ? `
                        <div class="mt-3 pt-3 border-t">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-[10px] sm:text-xs text-gray-500">Options</span>
                                <button onclick="addFieldOption(${index})" class="text-[#d4af37] text-xs hover:underline">+ Add Option</button>
                            </div>
                            <div class="space-y-2">
                                ${(field.options || []).map((opt, optIndex) => `
                                    <div class="flex gap-2">
                                        <input type="text" value="${opt}" onchange="updateFieldOption(${index}, ${optIndex}, this.value)" class="flex-1 border rounded px-2 py-1 text-xs">
                                        <button onclick="removeFieldOption(${index}, ${optIndex})" class="text-red-500 text-xs hover:underline px-1">×</button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active', 'bg-[#d4af37]', 'text-white'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.add('bg-white'));

            document.getElementById('tab-' + tabName).classList.remove('hidden');
            event.target.classList.add('active');
            event.target.classList.remove('bg-white');

            if (tabName === 'media') {
                loadMediaLibrary();
            }
        }

        // Page switching
        function selectPage(pageName) {
            currentPage = pageName;

            // Update page buttons
            document.querySelectorAll('.page-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-[#d4af37]', 'text-white', 'border-[#d4af37]');
                btn.classList.add('bg-white', 'text-gray-700', 'border-gray-300');
            });
            event.target.classList.add('active', 'bg-[#d4af37]', 'text-white', 'border-[#d4af37]');
            event.target.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');

            // Hide all page tabs and content
            document.querySelectorAll('.page-tabs').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));

            // Show selected page tabs
            document.getElementById(pageName + '-tabs').classList.remove('hidden');

            // Show first tab of selected page
            const firstTabsMap = {
                'home': 'header',
                'coliving': 'coliving-hero',
                'investor': 'investor-hero',
                'search': 'search-hero'
            };
            document.getElementById('tab-' + firstTabsMap[pageName]).classList.remove('hidden');

            // Update active tab button
            const tabsContainer = document.getElementById(pageName + '-tabs');
            if (tabsContainer) {
                const tabBtns = tabsContainer.querySelectorAll('.tab-btn');
                tabBtns.forEach((btn, idx) => {
                    if (idx === 0) {
                        btn.classList.add('active');
                        btn.classList.remove('bg-white');
                    } else {
                        btn.classList.remove('active');
                        btn.classList.add('bg-white');
                    }
                });
            }
        }

        // Load content from API
        async function loadContent() {
            console.log('[Admin] Loading content...');
            try {
                const url = '/api/content?t=' + Date.now();
                console.log('[Admin] Fetching:', url);
                const response = await fetch(url, {
                    cache: 'no-store',
                    headers: {
                        'Cache-Control': 'no-cache',
                        'Pragma': 'no-cache'
                    }
                });
                const data = await response.json();
                console.log('[Admin] Load response:', JSON.stringify(data, null, 2));

                if (data.success && data.content) {
                    siteContent = data.content;
                    console.log('[Admin] Content loaded, keys:', Object.keys(siteContent));
                    console.log('[Admin] Hero headline1:', siteContent.hero?.headline1);
                    populateFields();
                    console.log('[Admin] Fields populated');
                } else if (data.success && !data.content) {
                    console.log('[Admin] No content saved yet');
                } else {
                    console.error('[Admin] Load failed:', data.error);
                }
            } catch (error) {
                console.error('[Admin] Load error:', error);
            }
        }

        // Populate form fields with loaded content
        function populateFields() {
            // Visibility toggles
            if (siteContent.visibility) {
                document.getElementById('header_visible').checked = siteContent.visibility.header !== false;
                document.getElementById('hero_visible').checked = siteContent.visibility.hero !== false;
                document.getElementById('about_visible').checked = siteContent.visibility.about !== false;
                document.getElementById('stats_visible').checked = siteContent.visibility.stats !== false;
                document.getElementById('investors_visible').checked = siteContent.visibility.investors !== false;
                document.getElementById('sourcing_visible').checked = siteContent.visibility.sourcing !== false;
                document.getElementById('contact_visible').checked = siteContent.visibility.contact !== false;
                document.getElementById('footer_visible').checked = siteContent.visibility.footer !== false;
            }

            // Header
            if (siteContent.header) {
                document.getElementById('header_logo_text').value = siteContent.header.logo_text || 'Wright Key Property';
                if (siteContent.header.logo_url) {
                    document.getElementById('logoPreview').innerHTML = `<img src="${siteContent.header.logo_url}" class="max-w-full max-h-full object-contain">`;
                }
                if (siteContent.header.menu_items) {
                    siteContent.header.menu_items.forEach((item, i) => {
                        const idx = i + 1;
                        if (document.getElementById(`menu_item${idx}_text`)) {
                            document.getElementById(`menu_item${idx}_text`).value = item.text || '';
                            document.getElementById(`menu_item${idx}_visible`).checked = item.visible !== false;
                        }
                    });
                }
            }

            // Stats
            if (siteContent.stats) {
                document.getElementById('stats_items').value = siteContent.stats.items || '';
            }

            // Hero
            if (siteContent.hero) {
                document.getElementById('hero_headline1').value = siteContent.hero.headline1 || '';
                document.getElementById('hero_headline2').value = siteContent.hero.headline2 || '';
                document.getElementById('hero_headline3').value = siteContent.hero.headline3 || '';
                document.getElementById('hero_subheadline').value = siteContent.hero.subheadline || '';
                document.getElementById('hero_cta1_text').value = siteContent.hero.cta1_text || '';
                document.getElementById('hero_cta1_link').value = siteContent.hero.cta1_link || '';
                document.getElementById('hero_cta2_text').value = siteContent.hero.cta2_text || '';
                document.getElementById('hero_cta2_link').value = siteContent.hero.cta2_link || '';
                if (siteContent.hero.video_url) {
                    document.getElementById('heroVideoPreview').innerHTML = `<video src="${siteContent.hero.video_url}" class="w-full h-full object-cover rounded" muted></video>`;
                }
            }

            // About
            if (siteContent.about) {
                document.getElementById('about_label').value = siteContent.about.label || '';
                document.getElementById('about_headline').value = siteContent.about.headline || '';
                document.getElementById('about_paragraph1').value = siteContent.about.paragraph1 || '';
                document.getElementById('about_paragraph2').value = siteContent.about.paragraph2 || '';
                document.getElementById('about_link_text').value = siteContent.about.link_text || '';
                if (siteContent.about.image1_url) {
                    document.getElementById('aboutImage1Preview').innerHTML = `<img src="${siteContent.about.image1_url}" class="w-full h-full object-cover rounded">`;
                }
                if (siteContent.about.image2_url) {
                    document.getElementById('aboutImage2Preview').innerHTML = `<img src="${siteContent.about.image2_url}" class="w-full h-full object-cover rounded">`;
                }
            }

            // Investors
            if (siteContent.investors) {
                document.getElementById('investors_label').value = siteContent.investors.label || '';
                document.getElementById('investors_headline').value = siteContent.investors.headline || '';
                document.getElementById('investor_card1_title').value = siteContent.investors.card1_title || '';
                document.getElementById('investor_card1_desc').value = siteContent.investors.card1_desc || '';
                document.getElementById('investor_card2_title').value = siteContent.investors.card2_title || '';
                document.getElementById('investor_card2_desc').value = siteContent.investors.card2_desc || '';
                document.getElementById('investor_card3_title').value = siteContent.investors.card3_title || '';
                document.getElementById('investor_card3_desc').value = siteContent.investors.card3_desc || '';
                if (siteContent.investors.image_url) {
                    document.getElementById('investorImagePreview').innerHTML = `<img src="${siteContent.investors.image_url}" class="w-full h-full object-cover rounded">`;
                }
            }

            // Sourcing
            if (siteContent.sourcing) {
                document.getElementById('sourcing_headline1').value = siteContent.sourcing.headline1 || '';
                document.getElementById('sourcing_headline2').value = siteContent.sourcing.headline2 || '';
                document.getElementById('sourcing_description').value = siteContent.sourcing.description || '';
                document.getElementById('sourcing_button_text').value = siteContent.sourcing.button_text || '';
                if (siteContent.sourcing.before_image) {
                    document.getElementById('beforeImagePreview').innerHTML = `<img src="${siteContent.sourcing.before_image}" class="w-full h-full object-cover rounded">`;
                }
                if (siteContent.sourcing.after_image) {
                    document.getElementById('afterImagePreview').innerHTML = `<img src="${siteContent.sourcing.after_image}" class="w-full h-full object-cover rounded">`;
                }
            }

            // Contact
            if (siteContent.contact) {
                document.getElementById('contact_label').value = siteContent.contact.label || '';
                document.getElementById('contact_headline').value = siteContent.contact.headline || '';
                document.getElementById('contact_email').value = siteContent.contact.email || '';
                document.getElementById('contact_phone').value = siteContent.contact.phone || '';
                document.getElementById('contact_address').value = siteContent.contact.address || '';
                document.getElementById('form_submit_text').value = siteContent.contact.form_submit_text || '';
                // Load dynamic form fields
                if (siteContent.contact.form_fields) {
                    formFields = siteContent.contact.form_fields;
                    renderFormFields();
                }
            }

            // Footer
            if (siteContent.footer) {
                document.getElementById('footer_company').value = siteContent.footer.company || '';
                document.getElementById('footer_copyright').value = siteContent.footer.copyright || '';
                document.getElementById('footer_instagram').value = siteContent.footer.instagram || '';
            }
        }

        // Gather all content from form fields
        function gatherContent() {
            return {
                visibility: {
                    header: document.getElementById('header_visible').checked,
                    hero: document.getElementById('hero_visible').checked,
                    about: document.getElementById('about_visible').checked,
                    stats: document.getElementById('stats_visible').checked,
                    investors: document.getElementById('investors_visible').checked,
                    sourcing: document.getElementById('sourcing_visible').checked,
                    contact: document.getElementById('contact_visible').checked,
                    footer: document.getElementById('footer_visible').checked
                },
                header: {
                    logo_text: document.getElementById('header_logo_text').value,
                    logo_url: siteContent.header?.logo_url || '',
                    menu_items: [
                        { text: document.getElementById('menu_item1_text').value, visible: document.getElementById('menu_item1_visible').checked },
                        { text: document.getElementById('menu_item2_text').value, visible: document.getElementById('menu_item2_visible').checked },
                        { text: document.getElementById('menu_item3_text').value, visible: document.getElementById('menu_item3_visible').checked },
                        { text: document.getElementById('menu_item4_text').value, visible: document.getElementById('menu_item4_visible').checked },
                        { text: document.getElementById('menu_item5_text').value, visible: document.getElementById('menu_item5_visible').checked }
                    ]
                },
                stats: {
                    items: document.getElementById('stats_items').value
                },
                hero: {
                    headline1: document.getElementById('hero_headline1').value,
                    headline2: document.getElementById('hero_headline2').value,
                    headline3: document.getElementById('hero_headline3').value,
                    subheadline: document.getElementById('hero_subheadline').value,
                    cta1_text: document.getElementById('hero_cta1_text').value,
                    cta1_link: document.getElementById('hero_cta1_link').value,
                    cta2_text: document.getElementById('hero_cta2_text').value,
                    cta2_link: document.getElementById('hero_cta2_link').value,
                    video_url: siteContent.hero?.video_url || ''
                },
                about: {
                    label: document.getElementById('about_label').value,
                    headline: document.getElementById('about_headline').value,
                    paragraph1: document.getElementById('about_paragraph1').value,
                    paragraph2: document.getElementById('about_paragraph2').value,
                    link_text: document.getElementById('about_link_text').value,
                    image1_url: siteContent.about?.image1_url || '',
                    image2_url: siteContent.about?.image2_url || ''
                },
                investors: {
                    label: document.getElementById('investors_label').value,
                    headline: document.getElementById('investors_headline').value,
                    card1_title: document.getElementById('investor_card1_title').value,
                    card1_desc: document.getElementById('investor_card1_desc').value,
                    card2_title: document.getElementById('investor_card2_title').value,
                    card2_desc: document.getElementById('investor_card2_desc').value,
                    card3_title: document.getElementById('investor_card3_title').value,
                    card3_desc: document.getElementById('investor_card3_desc').value,
                    image_url: siteContent.investors?.image_url || ''
                },
                sourcing: {
                    headline1: document.getElementById('sourcing_headline1').value,
                    headline2: document.getElementById('sourcing_headline2').value,
                    description: document.getElementById('sourcing_description').value,
                    button_text: document.getElementById('sourcing_button_text').value,
                    before_image: siteContent.sourcing?.before_image || '',
                    after_image: siteContent.sourcing?.after_image || ''
                },
                contact: {
                    label: document.getElementById('contact_label').value,
                    headline: document.getElementById('contact_headline').value,
                    email: document.getElementById('contact_email').value,
                    phone: document.getElementById('contact_phone').value,
                    address: document.getElementById('contact_address').value,
                    form_submit_text: document.getElementById('form_submit_text').value,
                    form_fields: formFields
                },
                footer: {
                    company: document.getElementById('footer_company').value,
                    copyright: document.getElementById('footer_copyright').value,
                    instagram: document.getElementById('footer_instagram').value
                }
            };
        }

        // Helper to update status on both desktop and mobile
        function updateStatus(text, colorClass) {
            const statusEl = document.getElementById('saveStatus');
            const statusMobile = document.getElementById('saveStatusMobile');
            [statusEl, statusMobile].forEach(el => {
                if (el) {
                    el.textContent = text;
                    el.classList.remove('text-gray-400', 'text-yellow-500', 'text-green-500', 'text-red-500');
                    el.classList.add(colorClass);
                }
            });
        }

        // Save all content
        async function saveAllContent() {
            updateStatus('Saving...', 'text-yellow-500');
            console.log('[Admin] Saving content...');

            try {
                const content = gatherContent();
                console.log('[Admin] Content to save:', JSON.stringify(content, null, 2));
                console.log('[Admin] Hero headline1 being saved:', content.hero?.headline1);

                const response = await fetch('/api/content', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(content)
                });
                const data = await response.json();
                console.log('[Admin] Save response:', JSON.stringify(data, null, 2));

                if (data.success) {
                    siteContent = content;
                    console.log('[Admin] Save successful, blob URL:', data.url);

                    // Verify save by immediately reloading
                    console.log('[Admin] Verifying save...');
                    const verifyResponse = await fetch('/api/content?verify=' + Date.now(), {
                        cache: 'no-store',
                        headers: { 'Cache-Control': 'no-cache', 'Pragma': 'no-cache' }
                    });
                    const verifyData = await verifyResponse.json();
                    console.log('[Admin] Verification response:', JSON.stringify(verifyData, null, 2));

                    if (verifyData.success && verifyData.content) {
                        console.log('[Admin] Verified hero headline1:', verifyData.content.hero?.headline1);
                        if (verifyData.content.hero?.headline1 === content.hero?.headline1) {
                            updateStatus('Saved & Verified', 'text-green-500');
                        } else {
                            console.warn('[Admin] Verification mismatch!');
                            console.warn('[Admin] Saved:', content.hero?.headline1);
                            console.warn('[Admin] Loaded:', verifyData.content.hero?.headline1);
                            updateStatus('Saved (verify mismatch)', 'text-yellow-500');
                        }
                    }

                    setTimeout(() => {
                        updateStatus('All changes saved', 'text-gray-400');
                    }, 2000);
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                updateStatus('Error: ' + error.message, 'text-red-500');
                console.error('[Admin] Save error:', error);
                alert('Error saving content: ' + error.message);
            }
        }

        // Upload functions
        async function uploadLogo(input) {
            if (!input.files[0]) return;
            try {
                const url = await uploadFile(input.files[0]);
                siteContent.header = siteContent.header || {};
                siteContent.header.logo_url = url;
                document.getElementById('logoPreview').innerHTML = `<img src="${url}" class="max-w-full max-h-full object-contain">`;
                await saveAllContent();
            } catch (error) {
                alert('Error uploading logo: ' + error.message);
            }
        }

        function removeLogo() {
            siteContent.header = siteContent.header || {};
            siteContent.header.logo_url = '';
            document.getElementById('logoPreview').innerHTML = '<span class="text-gray-400 text-sm">No logo</span>';
        }

        async function setLogoUrl() {
            const url = document.getElementById('logo_url_input').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            siteContent.header = siteContent.header || {};
            siteContent.header.logo_url = url;
            document.getElementById('logoPreview').innerHTML = `<img src="${url}" class="max-w-full max-h-full object-contain">`;
            document.getElementById('logo_url_input').value = '';
            await saveAllContent();
        }

        async function setHeroVideoUrl() {
            const url = document.getElementById('hero_video_url_input').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            siteContent.hero = siteContent.hero || {};
            siteContent.hero.video_url = url;
            document.getElementById('heroVideoPreview').innerHTML = `<video src="${url}" class="w-full h-full object-cover rounded" muted></video>`;
            document.getElementById('hero_video_url_input').value = '';
            await saveAllContent();
        }

        function removeHeroVideo() {
            siteContent.hero = siteContent.hero || {};
            siteContent.hero.video_url = '';
            document.getElementById('heroVideoPreview').innerHTML = '<span class="text-gray-400 text-sm">No video</span>';
        }

        async function setAboutImageUrl(num) {
            const url = document.getElementById('about_image' + num + '_url_input').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            siteContent.about = siteContent.about || {};
            siteContent.about['image' + num + '_url'] = url;
            document.getElementById('aboutImage' + num + 'Preview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
            document.getElementById('about_image' + num + '_url_input').value = '';
            await saveAllContent();
        }

        function removeAboutImage(num) {
            siteContent.about = siteContent.about || {};
            siteContent.about['image' + num + '_url'] = '';
            document.getElementById('aboutImage' + num + 'Preview').innerHTML = '<span class="text-gray-400 text-sm">No image</span>';
        }

        async function setInvestorImageUrl() {
            const url = document.getElementById('investor_image_url_input').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            siteContent.investors = siteContent.investors || {};
            siteContent.investors.image_url = url;
            document.getElementById('investorImagePreview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
            document.getElementById('investor_image_url_input').value = '';
            await saveAllContent();
        }

        function removeInvestorImage() {
            siteContent.investors = siteContent.investors || {};
            siteContent.investors.image_url = '';
            document.getElementById('investorImagePreview').innerHTML = '<span class="text-gray-400 text-sm">No image</span>';
        }

        async function setSourcingImageUrl(type) {
            const url = document.getElementById(type + '_image_url_input').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            siteContent.sourcing = siteContent.sourcing || {};
            siteContent.sourcing[type + '_image'] = url;
            document.getElementById(type + 'ImagePreview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
            document.getElementById(type + '_image_url_input').value = '';
            await saveAllContent();
        }

        function removeSourcingImage(type) {
            siteContent.sourcing = siteContent.sourcing || {};
            siteContent.sourcing[type + '_image'] = '';
            document.getElementById(type + 'ImagePreview').innerHTML = '<span class="text-gray-400 text-sm">No image</span>';
        }

        async function uploadFile(file, prefix = 'admin/') {
            const formData = new FormData();
            formData.append('file', file);
            formData.append('filename', file.name);
            formData.append('isIntroVideo', 'false');

            const response = await fetch('/api/upload', {
                method: 'POST',
                body: formData
            });
            const data = await response.json();
            if (!data.success) throw new Error(data.error);
            return data.url;
        }

        async function uploadHeroVideo(input) {
            if (!input.files[0]) return;
            try {
                const url = await uploadFile(input.files[0]);
                siteContent.hero = siteContent.hero || {};
                siteContent.hero.video_url = url;
                document.getElementById('heroVideoPreview').innerHTML = `<video src="${url}" class="w-full h-full object-cover rounded" muted></video>`;
                await saveAllContent();
            } catch (error) {
                alert('Error uploading video: ' + error.message);
            }
        }

        async function uploadAboutImage(input, num) {
            if (!input.files[0]) return;
            try {
                const url = await uploadFile(input.files[0]);
                siteContent.about = siteContent.about || {};
                siteContent.about['image' + num + '_url'] = url;
                document.getElementById('aboutImage' + num + 'Preview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
                await saveAllContent();
            } catch (error) {
                alert('Error uploading image: ' + error.message);
            }
        }

        async function uploadInvestorImage(input) {
            if (!input.files[0]) return;
            try {
                const url = await uploadFile(input.files[0]);
                siteContent.investors = siteContent.investors || {};
                siteContent.investors.image_url = url;
                document.getElementById('investorImagePreview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
                await saveAllContent();
            } catch (error) {
                alert('Error uploading image: ' + error.message);
            }
        }

        async function uploadSourcingImage(input, type) {
            if (!input.files[0]) return;
            try {
                const url = await uploadFile(input.files[0]);
                siteContent.sourcing = siteContent.sourcing || {};
                siteContent.sourcing[type + '_image'] = url;
                document.getElementById(type + 'ImagePreview').innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded">`;
                await saveAllContent();
            } catch (error) {
                alert('Error uploading image: ' + error.message);
            }
        }

        async function uploadMedia(input) {
            if (!input.files.length) return;
            for (const file of input.files) {
                try {
                    await uploadFile(file);
                } catch (error) {
                    console.error('Error uploading:', error);
                }
            }
            loadMediaLibrary();
        }

        // Load media library
        async function loadMediaLibrary() {
            try {
                const response = await fetch('/api/list?prefix=uploads/');
                const data = await response.json();
                const grid = document.getElementById('mediaGrid');

                if (!data.success || !data.blobs.length) {
                    grid.innerHTML = '<p class="text-gray-400 col-span-4">No media files uploaded yet.</p>';
                    return;
                }

                grid.innerHTML = data.blobs.map(blob => {
                    const isVideo = blob.pathname.match(/\.(mp4|webm|mov)$/i);
                    return `
                        <div class="relative group cursor-pointer" onclick="copyToClipboard('${blob.url}')">
                            ${isVideo
                                ? `<video src="${blob.url}" class="w-full aspect-video object-cover rounded" muted></video>`
                                : `<img src="${blob.url}" class="w-full aspect-video object-cover rounded">`
                            }
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded">
                                <span class="text-white text-xs">Click to copy URL</span>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading media:', error);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            alert('URL copied to clipboard!');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadContent();
            renderFormFields();
        });
    </script>
</body>
</html>
